<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps | 机器学习小纵队</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-test-site.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-test-site.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps | 机器学习小纵队"><meta data-rh="true" name="description" content="1. 摘要"><meta data-rh="true" property="og:description" content="1. 摘要"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2025-06-09T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/zqqqqqqj1110"><meta data-rh="true" property="article:tag" content="Thesis Study Notes"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps" hreflang="en"><link data-rh="true" rel="alternate" href="https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps","mainEntityOfPage":"https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps","url":"https://your-docusaurus-test-site.com/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps","headline":"Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps","name":"Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps","description":"1. 摘要","datePublished":"2025-06-09T00:00:00.000Z","author":{"@type":"Person","name":"zqqqj","description":"super bug engineer 4 nlp,robot,cv,ml and ds","url":"https://github.com/zqqqqqqj1110","image":"https://avatars.githubusercontent.com/u/95482898?v=4"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://your-docusaurus-test-site.com/blog","name":"FEMATHS小组学习日志"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="机器学习小纵队 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="机器学习小纵队 Atom Feed">




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-K9P2+4+PNL1EfCT7eKZxLS9P9m1M9L3CwM2X7ZzZsda6CyaZozkn2lW7lRg3p2Ek" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7446dee8.css">
<script src="/assets/js/runtime~main.6b556136.js" defer="defer"></script>
<script src="/assets/js/main.87621461.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/favicon.ico" alt="机器学习小纵队" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/favicon.ico" alt="机器学习小纵队" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">机器学习小纵队</b></a><a class="navbar__item navbar__link" href="/docs/ch0/FEMATHS-wiki-introduction">计算数学以及机器学习Wiki</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">FEMATHS小组学习日志</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/FEMATHS" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><div role="group"><h3 class="yearGroupHeading_rMGB">2025</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/14-DeepONet_Learning_nonlinear_operators_for_identifying">DeepONet: Learning nonlinear operators for identifying differential equations based on the universal approximation theorem of operators</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/13-Deep Learning-Based Numerical Methods for High-Dimensional Parabolic Partial Differential Equations and Backward Stochastic Differential Equations">Machine learning based spectral methods for partial differential equations</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/12-Related GANs and their SRGAN ablation experiments">Related GANs and their SRGAN ablation experiments</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps">Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/00-Ahead-of-our-research-efforts">欢迎来到FEMATHS小组学习日志</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/01-how-to-find-good-research-paper">从入门到入土？不，是精通！科技论文完全指南：如何找到一篇合适的科技论文</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/02-how-to-read-research-paper">从入门到入土？不，是精通！科技论文完全指南：如何正确且高效地阅读一篇科技论文</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/03-how-to-write-research-paper">从入门到入土？不，是精通！科技论文完全指南：如何写出一篇优秀的科技论文</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/06-Bioinformatic analysis1（Linux Operation Guide）">Bioinformatic analysis:linux操作指南之上游分析(Part 1)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/07-Bioinformatic analysis2（Quality control and clustering）">Bioinformatic analysis:质量控制与聚类分析(Part 2)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/08-Bioinformatic analysis3（Differential genes and cell labeling）">Bioinformatic analysis:差异基因与细胞标注(Part3)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/09-Bioinformatic analysis4（Enrichment analysis）">Bioinformatic analysis:富集分析 (Part4)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/10-Bioinformatic analysis5（PPI and FT Analysis）">Bioinformatic analysis:PPI分析(Part 5)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/11-Bioinformatic analysis6（Sequential analysis）">Bioinformatic analysis:拟时序分析(Part 6)</a></li></ul></div><div role="group"><h3 class="yearGroupHeading_rMGB">2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/04-Physics-Informed-Deep-Learning-Part-one">Physics Informed Deep Learning (Part I) Data-driven  Solutions of Nonlinear Partial Differential Equations</a></li></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class="title_f1Hy">Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps</h1><div class="container_mt6G margin-vert--md"><time datetime="2025-06-09T00:00:00.000Z">June 9, 2025</time> · <!-- -->12 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/zqqqqqqj1110" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo authorImage_XqGP" src="https://avatars.githubusercontent.com/u/95482898?v=4" alt="zqqqj"></a><div class="avatar__intro authorDetails_lV9A"><div class="avatar__name"><a href="https://github.com/zqqqqqqj1110" target="_blank" rel="noopener noreferrer"><span class="authorName_yefp">zqqqj</span></a></div><small class="authorTitle_nd0D" title="super bug engineer 4 nlp,robot,cv,ml and ds">super bug engineer 4 nlp,robot,cv,ml and ds</small><div class="authorSocials_rSDt"></div></div></div></div></div></header><div id="__blog-post-container" class="markdown"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-摘要">1. 摘要<a href="#1-摘要" class="hash-link" aria-label="Direct link to 1. 摘要" title="Direct link to 1. 摘要">​</a></h2>
<p>约 15% 的全球人口受到各种残障或视力障碍的影响，但许多移动端的用户体验（UX）设计师和开发者在开发 App 时并未重视可访问性问题。这意味着每七个人中就有一个用户在使用 App 时面临不平等的体验，这不仅影响用户，也可能违反相关法规。实际上，如果 App 开发时考虑可访问性，不仅能提升整体用户体验，还能提升商业价值。因此，已有不少研究和检测工具被提出用于识别可访问性问题。</p>
<p>然而，与检测相比，<strong>修复工作明显滞后</strong>，尤其是“颜色相关的可访问性问题”——比如文字对比度不足和图片对比度不佳，这类问题极大地影响了低视力用户和老年用户的使用体验，而当前的修复方法对此无能为力。</p>
<p>为此，我们提出了 Iris：一种自动化且具备上下文感知能力的方法，用于修复颜色相关的可访问性问题。该方法通过设计一致性的颜色替换策略和属性定位算法，在<strong>修复问题的同时保持 UI 风格的一致性</strong>。实验显示，Iris 可达到 91.38% 的修复成功率，且效率较高。用户调研也表明其结果令人满意，开发者反馈积极。我们在 GitHub 上提交的 40 个 Pull Request 中已有 9 个被合并，另有 4 个正在积极沟通后续修复。Iris 工具现已开源，旨在推动移动可访问性修复领域的进一步研究。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-introduction">2. introduction<a href="#2-introduction" class="hash-link" aria-label="Direct link to 2. introduction" title="Direct link to 2. introduction">​</a></h2>
<p>懒的讲了，感觉没啥用。反正大意就是解决这三个问题</p>
<p><strong>1.</strong> 修复后必须保持原始 UI 页面的设计风格一致性；
<strong>2.</strong> 必须准确定位待修复的 UI 组件及其颜色属性；
<strong>3.</strong> 修复结果需 被真实用户和开发者接受，具备实用性。</p>
<p>作者提出了 iris，可以弄一个流程图体现该作者的研究工作</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">                  [1] APK 文件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ┌───────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │        Xbot 检测工具           │ ← 基于 Accessibility Scanner</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               输出内容包括：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               - 无障碍检测报告（JSON / XML）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               - UI 页面截图（PNG）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ┌────────── ──────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │               Iris 修复系统              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1. 颜色参考数据库（Reference DB）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 收集 9978 个 App 的 UI 配色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 用于推荐合适的替换颜色</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  2. 上下文感知颜色选择（Context-aware）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 保持风格一致性（HSV 模型、色轮协调）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 决定修改 foreground 还是 background</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  3. 属性定位模块（Attribute-to-Repair）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 定位 XML 或 Java 中待修复组件</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 分析 textColor、background 等属性</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  4. 图像修复模块（仅针对图标）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 判断功能性 vs 装饰性图像</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     - 调整颜色或替换 vector 图标</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ┌───────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        │         修复后的 APK 输出       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-preliminary">3. Preliminary<a href="#3-preliminary" class="hash-link" aria-label="Direct link to 3. Preliminary" title="Direct link to 3. Preliminary">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="31-标准">3.1 标准<a href="#31-标准" class="hash-link" aria-label="Direct link to 3.1 标准" title="Direct link to 3.1 标准">​</a></h3>
<p>需要解决以下问题：</p>
<ol>
<li>普通文本要求前景色与背景色的对比度 ≥4.5:1*</li>
<li>大号加粗文本则要求 ≥3:1</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="32-颜色实现方式">3.2 颜色实现方式<a href="#32-颜色实现方式" class="hash-link" aria-label="Direct link to 3.2 颜色实现方式" title="Direct link to 3.2 颜色实现方式">​</a></h2>
<p>在 xml 文件中，颜色一般是这样表达的</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;TextView android:textColor=&quot;#80ff0000&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Button android:background=&quot;#80ff0000&quot; /&gt;</span><br></span></code></pre></div></div>
<p>提出 iris 用于修复这样的问题</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="33-检测工具提供的输入">3.3 检测工具提供的输入<a href="#33-检测工具提供的输入" class="hash-link" aria-label="Direct link to 3.3 检测工具提供的输入" title="Direct link to 3.3 检测工具提供的输入">​</a></h2>
<p>这部分有很多，但是这个作者毫无创新，只是单纯的将各种工具整合而已（也有可能我不是这个方向的，不知道主流是什么样的^_^）</p>
<h1>4. Approach</h1>
<p>这块是 iris 的核心部分，主要流程如下</p>
<ol>
<li><strong>参考数据库构建（Reference DB Construction）</strong></li>
<li><strong>上下文感知的颜色选择（Context-aware Color Selection）</strong></li>
<li><strong>待修复属性定位（Attribute-to-Repair Localization）</strong></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="41-reference-db-construction">4.1 Reference DB Construction<a href="#41-reference-db-construction" class="hash-link" aria-label="Direct link to 4.1 Reference DB Construction" title="Direct link to 4.1 Reference DB Construction">​</a></h2>
<p><strong>目的</strong>：提供颜色替换时的“设计参考”。</p>
<p><strong>流程</strong>：</p>
<ul>
<li>使用 Xbot 对近 9978 个 APK 检测；</li>
<li>收集其中未出现颜色对比度问题的 UI 组件；</li>
<li>根据组件类型分类（如 Button、TextView 等）；</li>
<li>从 UI 截图中提取每个组件的前景色和背景色；</li>
<li>使用** **<code>getcolors()</code> 获取最常出现的两种颜色；</li>
<li>对比颜色值，保留满足对比度要求的颜色对，构建数据库。</li>
</ul>
<p><strong>优势</strong>：使用真实 App 中“被认可的配色”作为修复备选，<strong>提高了颜色风格的一致性</strong>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="42-context-aware-color-selection">4.2 Context-Aware Color Selection<a href="#42-context-aware-color-selection" class="hash-link" aria-label="Direct link to 4.2 Context-Aware Color Selection" title="Direct link to 4.2 Context-Aware Color Selection">​</a></h2>
<p>算法流程在原文中给了，简单来说就是</p>
<ul>
<li>输入：当前问题颜色、颜色候选集、页面色调类型、偏转角；</li>
<li>筛选候选颜色集，计算最小“色调距离”；</li>
<li>如果没有合适候选色，就使用 HSV 微调获得备选颜色；</li>
<li>返回最接近原设计的最优替换色。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="43-attribute-to-repair-localization">4.3 Attribute-to-Repair Localization<a href="#43-attribute-to-repair-localization" class="hash-link" aria-label="Direct link to 4.3 Attribute-to-Repair Localization" title="Direct link to 4.3 Attribute-to-Repair Localization">​</a></h2>
<p>根据 Xbot 报告，精准找到需要修改的 XML 属性或代码</p>
<p>定位方式：</p>
<ul>
<li><strong>组件 ID（resource-id）存在时</strong>：可直接在反编译的 layout 中精确查找；</li>
<li><strong>仅有 bounds 坐标时</strong>：通过坐标在 layout tree 中找到组件，再通过文本等信息比对 XML 结构中的** **<code>android:text</code>属性，进行模糊定位。</li>
</ul>
<h1>5. 复现</h1>
<p>前文我们知道了该论文有两部分组成，Xbot 和 iris 部分，因此我们一点一点来，先讲 Xbot 部分</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="51-xbot">5.1 Xbot<a href="#51-xbot" class="hash-link" aria-label="Direct link to 5.1 Xbot" title="Direct link to 5.1 Xbot">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="511-下载原代码">5.1.1 下载原代码<a href="#511-下载原代码" class="hash-link" aria-label="Direct link to 5.1.1 下载原代码" title="Direct link to 5.1.1 下载原代码">​</a></h3>
<p>首先把 GitHub 仓库给 down 下来</p>
<p>仓库地址：<a href="https://github.com/tjusenchen/Xbot" target="_blank" rel="noopener noreferrer">https://github.com/tjusenchen/Xbot</a></p>
<p>这是一个很老的代码，需要用到 py2 来运行，mac 上是不能通过 conda 下载 py2 版本的，因此这般选择 pyenv（也是一种管理工具，和 conda 差不多），如果是 windows 用户的话可忽略</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="512-安装模拟器">5.1.2 安装模拟器<a href="#512-安装模拟器" class="hash-link" aria-label="Direct link to 5.1.2 安装模拟器" title="Direct link to 5.1.2 安装模拟器">​</a></h3>
<p>模拟器也要和仓库中的 readme 中一样，选择 Android 7.1.1+PIX，如果太新的话会导致兼容性问题。</p>
<p>在创建好了模拟器之后，可以通过该命令检查是否连上了</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb devices</span><br></span></code></pre></div></div>
<p>跳出来你的模拟器名字就 ok 了，如果你没看到的话，有很大原因是你没启动（我因为这个问题卡了一下午，md）</p>
<p>当然，使用的前提是你得先把 adb 下了，可以通过如下命令查看</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Android Debug Bridge version 1.0.41</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Version ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>系统默认一般是会带有的，路径如下</p>
<p>macOS:<code>~/Library/Android/sdk/platform-tools/adb</code></p>
<p>Windows:C:\Users&lt;用户名&gt;\AppData\Local\Android\Sdk\platform-tools\adb`</p>
<p>如果发现没的话也问题不大，去官网下一个</p>
<p>官网地址：<a href="https://developer.android.com/studio/releases/platform-tools" target="_blank" rel="noopener noreferrer">https://developer.android.com/studio/releases/platform-tools</a></p>
<p>然后解压添加到环境变量一条龙就 ok 了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="513-安装-apk-文件">5.1.3 安装 apk 文件<a href="#513-安装-apk-文件" class="hash-link" aria-label="Direct link to 5.1.3 安装 apk 文件" title="Direct link to 5.1.3 安装 apk 文件">​</a></h3>
<p>这部分就不用多说了，把 adb 命名下载好了之后就 adb install，例如</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb install path/to/your_app.apk</span><br></span></code></pre></div></div>
<p>需要安装两个，分别是 GAS 和 Vol 的这两个 apk，都是在仓库里给了的，直接安装就行。</p>
<p>**尤其需要注意！！！**GAS 下载了之后，需要现在模拟器里设置- accessibility-GAS，打开服务。打开之后会跳出一个蓝色框框，然后再代码中修改你的这个悬浮窗的坐标，不然会造成闪退的情况！！！！！！修改的代码叫做 explore_activaity.py，scan_and_return 函数中</p>
<p>还有一个 vol 就没啥好说的了，下了就行，这是一个景点经典用 apk</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="514-运行-xbot">5.1.4 运行 Xbot<a href="#514-运行-xbot" class="hash-link" aria-label="Direct link to 5.1.4 运行 Xbot" title="Direct link to 5.1.4 运行 Xbot">​</a></h3>
<p><strong>1. 准备工作：</strong></p>
<ol>
<li>Python 环境</li>
</ol>
<ul>
<li>推荐使用** ****Python 2.7**</li>
<li>所需库基本为标准库：如** <strong><code>os</code>,</strong> <strong><code>commands</code>,</strong> <strong><code>csv</code>,</strong> <strong><code>shutil</code>,</strong> **<code>time</code></li>
</ul>
<ol start="2">
<li>Genymotion 模拟器准备</li>
</ol>
<ul>
<li>已安装** ****Genymotion Desktop**</li>
<li>启动一个设备（例如** **<code>127.0.0.1:6555</code>）</li>
<li>模拟器 root 权限已开启（<code>adb root</code> 可运行）</li>
</ul>
<p><strong>2. 文件与路径结构检查</strong></p>
<p>目录结构（假设在** **<code>Xbot-main</code> 下运行）</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">├── code/                      # Python 脚本主目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── run_xbot.py            # 主运行脚本</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── explore_activity.py    # 动态探索逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── repkg_apk.py           # 重打包逻辑（已用可选）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── apks/                      # 存放待测 APK 的目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   └── xxx.apk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── config/                    # 相关配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── coolapk.keystore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   ├── libs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│   │   └── android-platforms/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── results/                   # 自动创建，输出目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── storydroid/               # 自动创建，用于参数记录等</span><br></span></code></pre></div></div>
<p><strong>3. APK 文件命名注意：</strong></p>
<ul>
<li><code>.apk</code> 文件放在** **<code>apks/</code> 中，**不要加中文名或特殊字符**</li>
<li>如** **<code>a2dp.Vol_133.apk</code></li>
</ul>
<p><strong>4. 代码准备工作</strong></p>
<ol>
<li>确认** **<code>run_xbot.py</code> 开头几项路径为你本机配置，例如</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">java_home_path = &#x27;/Library/Java/JavaVirtualMachines/jdk1.8.0_211.jdk/Contents/Home/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdk_platform_path = &#x27;/Users/yourname/.../android-platforms/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lib_home_path = &#x27;/Users/yourname/.../libs/&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<ol start="2">
<li>清理旧 outputs（可选）</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">rm -rf results/ storydroid/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>5. 执行命令</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd Xbot-main/code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python run_xbot.py 127.0.0.1:6555 ../main-folder/apks/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># adb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adb devices.   # 查看设备名字</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>6. 运行 xml 修复</strong></p>
<p>Xbot 只有原始 apk 页面的 Xbot，还需要通过 issues 来生成新的 xml 以让 iris 知道哪个组件有问题</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">python3 Xbot-main/code/txt2irisxml.py \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Xbot-main/results/outputs/a2dp.Vol_133/issues/a2dp.Vol.EditDevice/a2dp.Vol.EditDevice.txt \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Xbot-main/results/outputs/a2dp.Vol_133/issues/a2dp.Vol.EditDevice/AccessibilityScanner.xml</span><br></span></code></pre></div></div>
<p>贴出 txt2irisxml 代码，放在 code 目录下面</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># -*- coding: utf-8 -*-</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import os</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import xml.etree.ElementTree as ET</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def parse_txt(txt_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    with open(txt_path, &#x27;r&#x27;, encoding=&#x27;utf-8&#x27;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lines = [line.strip() for line in f.readlines() if line.strip()]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    issues = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    i = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    while i &lt; len(lines):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        line = lines[i]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # --- Item label / Missing label</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if &quot;Item label&quot; in line:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            res_id = lines[i] if i &lt; len(lines) else &quot;unknown&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            issues.append({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Type&quot;: &quot;MissingLabel&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ResourceID&quot;: res_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Class&quot;: &quot;android.widget.EditText&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # --- Text contrast</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif &quot;Text contrast&quot; in line:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            res_id = lines[i] if i &lt; len(lines) else &quot;unknown&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ratio = &quot;N/A&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if i &lt; len(lines) and &quot;contrast ratio is&quot; in lines[i]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                try:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ratio = lines[i].split(&quot;contrast ratio is&quot;)[1].split(&quot;.&quot;)[0] + &quot;.&quot; + lines[i].split(&quot;contrast ratio is&quot;)[1].split(&quot;.&quot;)[1][:2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                except:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            issues.append({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Type&quot;: &quot;LowTextContrast&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ResourceID&quot;: res_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Class&quot;: &quot;android.widget.TextView&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ContrastRatio&quot;: ratio</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        # --- Touch target too small</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elif &quot;Touch target&quot; in line:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            res_id = lines[i] if i &lt; len(lines) else &quot;unknown&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            issues.append({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Type&quot;: &quot;TouchTargetTooSmall&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;ResourceID&quot;: res_id,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;Class&quot;: &quot;android.widget.Button&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            i += 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return issues</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">def write_xml(issues, output_path):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    root = ET.Element(&quot;AccessibilityIssues&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for issue in issues:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        item = ET.SubElement(root, &quot;Issue&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ET.SubElement(item, &quot;Type&quot;).text = issue.get(&quot;Type&quot;, &quot;Unknown&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ET.SubElement(item, &quot;ResourceID&quot;).text = issue.get(&quot;ResourceID&quot;, &quot;unknown&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ET.SubElement(item, &quot;Class&quot;).text = issue.get(&quot;Class&quot;, &quot;android.view.View&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if &quot;ContrastRatio&quot; in issue:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ET.SubElement(item, &quot;ContrastRatio&quot;).text = issue[&quot;ContrastRatio&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree = ET.ElementTree(root)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    os.makedirs(os.path.dirname(output_path), exist_ok=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tree.write(output_path, encoding=&quot;utf-8&quot;, xml_declaration=True)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    print(f&quot;✅ Created XML: {output_path}&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if len(sys.argv) != 3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        print(&quot;Usage: python txt2irisxml.py input.txt output.xml&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sys.exit(1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    txt_file = sys.argv[1]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    xml_file = sys.argv[2]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    issues = parse_txt(txt_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    write_xml(issues, xml_file)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p><strong>7. 运行结果</strong></p>
<p>在/results/apk_name 中。主要需要的是 outputs 这个文件夹</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="52-iris">5.2 IRIS<a href="#52-iris" class="hash-link" aria-label="Direct link to 5.2 IRIS" title="Direct link to 5.2 IRIS">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="521-解压-zip-文件">5.2.1. 解压 zip 文件<a href="#521-解压-zip-文件" class="hash-link" aria-label="Direct link to 5.2.1. 解压 zip 文件" title="Direct link to 5.2.1. 解压 zip 文件">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unzip iris-mobile-master.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mv iris-mobile-master iris-mobiles</span><br></span></code></pre></div></div>
<p>同时需要将之前 Xbot 的输出 outputs 存放在根目录下，zip 是原始在 GitHub 中下载的</p>
<p>GitHub 地址：<a href="https://github.com/tjuyuxinzhang/iris-mobile" target="_blank" rel="noopener noreferrer">https://github.com/tjuyuxinzhang/iris-mobile</a></p>
<ol start="2">
<li>复制 Xbot 输出和 APK 到 IRIS 指定位置</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /root/iris-mobile/code/data/xbot_output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp -r /root/outputs/a2dp.Vol_133 /root/iris-mobile/code/data/xbot_output/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p /root/iris-mobile/apks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cp /root/outputs/a2dp.Vol_133.apk /root/iris-mobile/apks/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="522-修改一些路径代码">5.2.2 修改一些路径代码<a href="#522-修改一些路径代码" class="hash-link" aria-label="Direct link to 5.2.2 修改一些路径代码" title="Direct link to 5.2.2 修改一些路径代码">​</a></h3>
<ol>
<li>repair_repack_class.py</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">results_folder = &quot;/root/iris-mobile&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resultPath = &#x27;/root/iris-mobile/refDB&#x27;  # 若没有这个文件夹可先建空目录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">outputsPath = &#x27;/root/outputs&#x27;</span><br></span></code></pre></div></div>
<ol start="2">
<li>harmonizationTs2.py</li>
</ol>
<p>把 250 行的 plt 部分注释了（如果用的是虚拟机，无图形页面的话）</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="523-切换目录并运行-iris-修复脚本">5.2.3 切换目录并运行 IRIS 修复脚本<a href="#523-切换目录并运行-iris-修复脚本" class="hash-link" aria-label="Direct link to 5.2.3 切换目录并运行 IRIS 修复脚本" title="Direct link to 5.2.3 切换目录并运行 IRIS 修复脚本">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">cd /root/iris-mobile/code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">python2 repair_repack_class.py --app_name a2dp.Vol_133</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="524-运行结果">5.2.4 运行结果<a href="#524-运行结果" class="hash-link" aria-label="Direct link to 5.2.4 运行结果" title="Direct link to 5.2.4 运行结果">​</a></h3>
<p>需要包含这些东西</p>
<ol>
<li>decompiling</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">decompiling...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Using Apktool 2.4.1 on a2dp.Vol_133.apk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Loading resource table...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Decoding AndroidManifest.xml with resources...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Loading resource table from file: /root/.local/share/apktool/framework/1.apk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Regular manifest package...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Decoding file-resources...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Decoding values */* XMLs...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Baksmaling classes.dex...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Copying assets and libs...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Copying unknown files...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">I: Copying original files...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">act_T_Alpha</span><br></span></code></pre></div></div>
<ol start="2">
<li>color layout</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">id_bound_colorSet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;Path&#x27;: ([&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5, &#x27;ManageData&#x27;, &#x27;&#x27;, &#x27;Text contrast&#x27;), &#x27;Action:&#x27;: ([&#x27;#F7ECEE&#x27;, &#x27;#F9EEF0&#x27;], 3, &#x27;CustomIntentMaker&#x27;, &#x27;TextView&#x27;, &#x27;Text contrast&#x27;), &#x27;title&#x27;: ([&#x27;#2979FF&#x27;, &#x27;#F9EEF0&#x27;], 4.5, &#x27;Preferences&#x27;, &#x27;&#x27;, &#x27;Text contrast&#x27;), &#x27;Data:&#x27;: ([&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3, &#x27;CustomIntentMaker&#x27;, &#x27;TextView&#x27;, &#x27;Text contrast&#x27;), &#x27;empty&#x27;: ([&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3, &#x27;ProviderList&#x27;, &#x27;&#x27;, &#x27;Text contrast&#x27;), &#x27;Type:&#x27;: ([&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3, &#x27;CustomIntentMaker&#x27;, &#x27;TextView&#x27;, &#x27;Text contrast&#x27;), &#x27;Output&#x27;: ([&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5, &#x27;ManageData&#x27;, &#x27;&#x27;, &#x27;Text contrast&#x27;), &#x27;pi_tv_name&#x27;: ([&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3, &#x27;PackagesChooser&#x27;, &#x27;&#x27;, &#x27;Text contrast&#x27;)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">waitChangeColor_self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;pi_tv_name&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;title&#x27;: (&#x27;#2153AE&#x27;, [&#x27;#2979FF&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;Data:&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Output&#x27;: (&#x27;#504348&#x27;, [&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;Action:&#x27;: (&#x27;&#x27;, [&#x27;#F7ECEE&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Type:&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Path&#x27;: (&#x27;#504348&#x27;, [&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;empty&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colorToChange_self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;Path&#x27;: &#x27;#504348&#x27;, &#x27;title&#x27;: &#x27;#2153AE&#x27;, &#x27;Data:&#x27;: &#x27;#585858&#x27;, &#x27;empty&#x27;: &#x27;#585858&#x27;, &#x27;Type:&#x27;: &#x27;#585858&#x27;, &#x27;Output&#x27;: &#x27;#504348&#x27;, &#x27;pi_tv_name&#x27;: &#x27;#585858&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;#F7ECEE&#x27;, &#x27;#F9EEF0&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">colorToChange_Layout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;Path&#x27;: &#x27;#504348&#x27;, &#x27;title&#x27;: &#x27;#2153AE&#x27;, &#x27;Action:&#x27;: &#x27;#000000&#x27;, &#x27;Data:&#x27;: &#x27;#585858&#x27;, &#x27;empty&#x27;: &#x27;#585858&#x27;, &#x27;Type:&#x27;: &#x27;#585858&#x27;, &#x27;Output&#x27;: &#x27;#504348&#x27;, &#x27;pi_tv_name&#x27;: &#x27;#585858&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">imageId_Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{(&#x27;Data:&#x27;, &#x27;TextView&#x27;): &#x27;[0,332][263,436]&#x27;, (&#x27;Path&#x27;, &#x27;TextView&#x27;): &#x27;[0,524][532,575]&#x27;, (&#x27;Type:&#x27;, &#x27;TextView&#x27;): &#x27;[0,453][263,557]&#x27;, (&#x27;pi_tv_name&#x27;, &#x27;TextView&#x27;): &#x27;[173,1610][954,1741]&#x27;, (&#x27;Action:&#x27;, &#x27;TextView&#x27;): &#x27;[0,211][263,315]&#x27;, (&#x27;title&#x27;, &#x27;TextView&#x27;): &#x27;[42,1756][626,1794]&#x27;, (&#x27;empty&#x27;, &#x27;TextView&#x27;): &#x27;[53,263][1027,601]&#x27;, (&#x27;Output&#x27;, &#x27;TextView&#x27;): &#x27;[465,575][614,669]&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;Path&#x27;: &#x27;#504348&#x27;, &#x27;[0,453][263,557]&#x27;: &#x27;#585858&#x27;, &#x27;title&#x27;: &#x27;#2153AE&#x27;, &#x27;[0,332][263,436]&#x27;: &#x27;#585858&#x27;, &#x27;empty&#x27;: &#x27;#585858&#x27;, &#x27;[0,211][263,315]&#x27;: &#x27;#000000&#x27;, &#x27;Output&#x27;: &#x27;#504348&#x27;, &#x27;pi_tv_name&#x27;: &#x27;#585858&#x27;}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">waitChangeColor_self</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{&#x27;pi_tv_name&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;title&#x27;: (&#x27;#2153AE&#x27;, [&#x27;#2979FF&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;Data:&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Output&#x27;: (&#x27;#504348&#x27;, [&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;Action:&#x27;: (&#x27;&#x27;, [&#x27;#F7ECEE&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Type:&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3), &#x27;Path&#x27;: (&#x27;#504348&#x27;, [&#x27;#817278&#x27;, &#x27;#F9EEF0&#x27;], 4.5), &#x27;empty&#x27;: (&#x27;#585858&#x27;, [&#x27;#FFFFFF&#x27;, &#x27;#F9EEF0&#x27;], 3)}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">recompile...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">(&#x27;time cost&#x27;, 327.10186195373535, &#x27;s&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="525-修复后的-apk-文件">5.2.5 修复后的 apk 文件<a href="#525-修复后的-apk-文件" class="hash-link" aria-label="Direct link to 5.2.5 修复后的 apk 文件" title="Direct link to 5.2.5 修复后的 apk 文件">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/root/iris-mobile/repackaged/a2dp.Vol_133.apk</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="526-将其放在-mac-上的-apk-文件夹中签名下载运行xbot-再次比对">5.2.6 将其放在 mac 上的 apk 文件夹中，签名下载运行（Xbot 再次比对）<a href="#526-将其放在-mac-上的-apk-文件夹中签名下载运行xbot-再次比对" class="hash-link" aria-label="Direct link to 5.2.6 将其放在 mac 上的 apk 文件夹中，签名下载运行（Xbot 再次比对）" title="Direct link to 5.2.6 将其放在 mac 上的 apk 文件夹中，签名下载运行（Xbot 再次比对）">​</a></h3>
<ol>
<li>签名 apk</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/Users/qijiazhou/Library/Android/sdk/build-tools/36.0.0/apksigner sign \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ks ~/Desktop/test-key.jks \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ks-key-alias testkey \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --ks-pass pass:123456 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --key-pass pass:123456 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --out ~/Desktop/apk/a2dp.Vol_133_signed.apk \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ~/Desktop/apk/a2dp.Vol_133.apk</span><br></span></code></pre></div></div>
<ol start="2">
<li>安装测试</li>
</ol>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">adb install -r ~/Desktop/apk/a2dp.Vol_133_signed.apk</span><br></span></code></pre></div></div>
<p>接着就是再运行 Xbot 的过程，将其放入 main- folder/apks 文件夹中</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-experiments">6. Experiments<a href="#6-experiments" class="hash-link" aria-label="Direct link to 6. Experiments" title="Direct link to 6. Experiments">​</a></h2>
<p>用户调查就不说了，按照复现流程走下来应该是能一样的。当然 ，此处可以讲一下修复成功率计算公式评价指标</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Repire = 修复成功的问题数/该app原始问题数 * 100%</span><br></span></code></pre></div></div></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/blog/tags/thesis-study-notes">Thesis Study Notes</a></li></ul></div></div><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><a href="https://github.com/yourrepo/blog/05-Automated and Context-Aware Repair of Color-Related Accessibility Issues for Android Apps.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/12-Related GANs and their SRGAN ablation experiments"><div class="pagination-nav__sublabel">Newer post</div><div class="pagination-nav__label">Related GANs and their SRGAN ablation experiments</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/00-Ahead-of-our-research-efforts"><div class="pagination-nav__sublabel">Older post</div><div class="pagination-nav__label">欢迎来到FEMATHS小组学习日志</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-摘要" class="table-of-contents__link toc-highlight">1. 摘要</a></li><li><a href="#2-introduction" class="table-of-contents__link toc-highlight">2. introduction</a></li><li><a href="#3-preliminary" class="table-of-contents__link toc-highlight">3. Preliminary</a><ul><li><a href="#31-标准" class="table-of-contents__link toc-highlight">3.1 标准</a></li></ul></li><li><a href="#32-颜色实现方式" class="table-of-contents__link toc-highlight">3.2 颜色实现方式</a></li><li><a href="#33-检测工具提供的输入" class="table-of-contents__link toc-highlight">3.3 检测工具提供的输入</a></li><li><a href="#41-reference-db-construction" class="table-of-contents__link toc-highlight">4.1 Reference DB Construction</a></li><li><a href="#42-context-aware-color-selection" class="table-of-contents__link toc-highlight">4.2 Context-Aware Color Selection</a></li><li><a href="#43-attribute-to-repair-localization" class="table-of-contents__link toc-highlight">4.3 Attribute-to-Repair Localization</a></li><li><a href="#51-xbot" class="table-of-contents__link toc-highlight">5.1 Xbot</a><ul><li><a href="#511-下载原代码" class="table-of-contents__link toc-highlight">5.1.1 下载原代码</a></li><li><a href="#512-安装模拟器" class="table-of-contents__link toc-highlight">5.1.2 安装模拟器</a></li><li><a href="#513-安装-apk-文件" class="table-of-contents__link toc-highlight">5.1.3 安装 apk 文件</a></li><li><a href="#514-运行-xbot" class="table-of-contents__link toc-highlight">5.1.4 运行 Xbot</a></li></ul></li><li><a href="#52-iris" class="table-of-contents__link toc-highlight">5.2 IRIS</a><ul><li><a href="#521-解压-zip-文件" class="table-of-contents__link toc-highlight">5.2.1. 解压 zip 文件</a></li><li><a href="#522-修改一些路径代码" class="table-of-contents__link toc-highlight">5.2.2 修改一些路径代码</a></li><li><a href="#523-切换目录并运行-iris-修复脚本" class="table-of-contents__link toc-highlight">5.2.3 切换目录并运行 IRIS 修复脚本</a></li><li><a href="#524-运行结果" class="table-of-contents__link toc-highlight">5.2.4 运行结果</a></li><li><a href="#525-修复后的-apk-文件" class="table-of-contents__link toc-highlight">5.2.5 修复后的 apk 文件</a></li><li><a href="#526-将其放在-mac-上的-apk-文件夹中签名下载运行xbot-再次比对" class="table-of-contents__link toc-highlight">5.2.6 将其放在 mac 上的 apk 文件夹中，签名下载运行（Xbot 再次比对）</a></li></ul></li><li><a href="#6-experiments" class="table-of-contents__link toc-highlight">6. Experiments</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">文档</h4></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/FEMATHS" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>