"use strict";(self.webpackChunkcm_fesmpn_space=self.webpackChunkcm_fesmpn_space||[]).push([[9503],{13358:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>o,frontMatter:()=>r,metadata:()=>t,toc:()=>d});var t=s(77764),i=s(74848),l=s(28453);const r={title:"CityLearn experiment",authors:["zqqqj"],tags:["RL"],date:new Date("2025-10-27T00:00:00.000Z")},a=void 0,c={authorsImageUrls:[void 0]},d=[{value:"\u4ee3\u7801\u8def\u5f84\uff1ahttps://github.com/zqqqqqqj1110/CityLearn_exp.git",id:"\u4ee3\u7801\u8def\u5f84httpsgithubcomzqqqqqqj1110citylearn_expgit",level:2},{value:"1. Cost or Emission Reduction",id:"1-cost-or-emission-reduction",level:2},{value:"1.1 \u5b9e\u9a8c\u8bbe\u7f6e",id:"11-\u5b9e\u9a8c\u8bbe\u7f6e",level:3},{value:"1.2 \u73af\u5883",id:"12-\u73af\u5883",level:3},{value:"1.3 \u4ee3\u7801",id:"13-\u4ee3\u7801",level:3},{value:"1.4 \u95ee\u9898\u6c47\u603b",id:"14-\u95ee\u9898\u6c47\u603b",level:3},{value:"1.4.1 RBC\uff08\u89c4\u5219\u63a7\u5236\uff09\u7684\u89c4\u5219\u662f\u4ec0\u4e48\uff1f\u4ee3\u7801\u4e2d\u600e\u4e48\u4f53\u73b0\uff1f",id:"141-rbc\u89c4\u5219\u63a7\u5236\u7684\u89c4\u5219\u662f\u4ec0\u4e48\u4ee3\u7801\u4e2d\u600e\u4e48\u4f53\u73b0",level:4},{value:"1.4.2. SAC\uff08\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\uff09\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5\uff1f",id:"142-sac\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5",level:4},{value:"1.4.3. RBC \u89c4\u5219\u80fd\u5426\u81ea\u5b9a\u4e49",id:"143-rbc-\u89c4\u5219\u80fd\u5426\u81ea\u5b9a\u4e49",level:4},{value:"1.4.4. SAC \u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u662f\u5426\u548c\u95ee\u9898 3 \u4e00\u6837\uff1f",id:"144-sac-\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u662f\u5426\u548c\u95ee\u9898-3-\u4e00\u6837",level:4},{value:"2. Peak Reduction",id:"2-peak-reduction",level:2},{value:"2.1 \u73af\u5883",id:"21-\u73af\u5883",level:3},{value:"2.2 \u4ee3\u7801",id:"22-\u4ee3\u7801",level:3},{value:"3. Discomfort and Electricity Consumption Reduction",id:"3-discomfort-and-electricity-consumption-reduction",level:2},{value:"3.1 \u4ee3\u7801",id:"31-\u4ee3\u7801",level:2},{value:"summary",id:"summary",level:2},{value:"1. \u91cd\u70b9",id:"1-\u91cd\u70b9",level:2},{value:"2. \u533a\u522b",id:"2-\u533a\u522b",level:2},{value:"3. \u4ee3\u7801",id:"3-\u4ee3\u7801",level:2},{value:"4. \u62a5\u9519",id:"4-\u62a5\u9519",level:2},{value:"4.1 AssertionError",id:"41-assertionerror",level:3},{value:"4.2 TypeError: new(): data must be a sequence (got NoneType)",id:"42-typeerror-new-data-must-be-a-sequence-got-nonetype",level:3},{value:"summary",id:"summary-1",level:2},{value:"1. \u91cd\u70b9\u4e0e\u76ee\u6807",id:"1-\u91cd\u70b9\u4e0e\u76ee\u6807",level:2},{value:"2. \u73af\u5883\u8bbe\u7f6e",id:"2-\u73af\u5883\u8bbe\u7f6e",level:2},{value:"3. \u5956\u52b1\u51fd\u6570",id:"3-\u5956\u52b1\u51fd\u6570",level:2},{value:"4. \u533a\u522b",id:"4-\u533a\u522b",level:2},{value:"5. \u4ee3\u7801",id:"5-\u4ee3\u7801",level:2},{value:"1. \u76ee\u7684",id:"1-\u76ee\u7684",level:2},{value:"\u73af\u5883\u914d\u7f6e",id:"\u73af\u5883\u914d\u7f6e",level:2},{value:"\u5bf9\u6bd4",id:"\u5bf9\u6bd4",level:2}];function h(e){const n={a:"a",annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",msub:"msub",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h2,{id:"\u4ee3\u7801\u8def\u5f84httpsgithubcomzqqqqqqj1110citylearn_expgit",children:["\u4ee3\u7801\u8def\u5f84\uff1a",(0,i.jsx)(n.a,{href:"https://github.com/zqqqqqqj1110/CityLearn_exp.git",children:"https://github.com/zqqqqqqj1110/CityLearn_exp.git"})]}),"\n",(0,i.jsx)(n.h1,{id:"target",children:"target"}),"\n",(0,i.jsx)(n.p,{children:"\u6bd4\u8f83\u4e0d\u540c\u4efb\u52a1\u914d\u7f6e\u4e0b\uff0cRBC\uff08Rule-Based Control\uff09\u4e0e RLC\uff08Reinforcement Learning Control\uff09\u5728\u80fd\u6e90\u3001\u6392\u653e\u3001\u5cf0\u503c\u4e0e\u8212\u9002\u5ea6\u65b9\u9762\u7684\u8868\u73b0\u3002\n\u6570\u91cf\uff1a \u5171 17 \u4e2a\u4efb\u52a1\uff08\u5355\u5efa\u7b51\u3001\u591a\u5efa\u7b51\u3001\u5355\u76ee\u6807\u3001\u591a\u76ee\u6807\uff09\n\u8f93\u51fa\u6307\u6807\uff1a"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Electricity Cost [$]"}),"\n",(0,i.jsx)(n.li,{children:"Emissions [kg CO\u2082]"}),"\n",(0,i.jsx)(n.li,{children:"Peak Demand [kW]"}),"\n",(0,i.jsx)(n.li,{children:"Discomfort Penalty [\u2013]"}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"\u51c6\u5907\u73af\u5883",children:"\u51c6\u5907\u73af\u5883"}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efa\u73af\u5883\uff0c\u51c6\u5907 citylearn \u7684 conda env"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"conda create -n citylearn python=3.10 -y\nconda activate citylearn\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5b89\u88c5 city learn V2"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"git clone https://github.com/intelligent-environments-lab/CityLearn.git\ncd CityLearn\npip install -e .    # \u6e90\u7801\u63a7\u5236\u7248\uff0c\u4ec5\u7528\u4e8e\u590d\u73b0\npip install citylearn   # \u540e\u7eed\u8bd5\u9a8c\u53ef\u4ee5\u76f4\u63a5\u7528\u8fd9\u4e2a\u4e0b\u8f7d\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679c\u662f macOS\uff0cpip install \u7684\u65f6\u5019\u4f1a\u53d1\u751f\u5982\u4e0b\u62a5\u9519\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ERROR: Ignored the following versions that require a different python version: 2.3.0 Requires-Python >=3.11; 2.3.1 Requires-Python >=3.11; 2.3.2 Requires-Python >=3.11; 2.3.3 Requires-Python >=3.11; 2.3.4 Requires-Python >=3.11\nERROR: Could not find a version that satisfies the requirement openstudio<=3.3.0 (from citylearn) (from versions: 3.5.0, 3.5.1, 3.6.0, 3.6.1, 3.7.0rc1, 3.7.0, 3.8.0, 3.9.0, 3.10.0rc5, 3.10.0)\nERROR: No matching distribution found for openstudio<=3.3.0\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u662f\u56e0\u4e3a OpenStudio \u53ea\u652f\u6301 x86 \u67b6\u6784\uff0cApple Silicon (arm64) \u4e0b\u6ca1\u6709\u7f16\u8bd1\u7248\u672c\uff0c\u8df3\u8fc7\u4f9d\u8d56\uff0c\u81ea\u5df1\u624b\u52a8\u5b89\u88c5"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"pip install -e . --no-deps\npip install numpy==1.26.4 pandas pyyaml scikit-learn==1.2.2 simplejson torch torchvision gymnasium==0.28.1 nrel-pysam doe_xstock\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u8fb9\u5efa\u8bae\u8fd8\u662f\u7528 linux \u6bd4\u8f83\u597d\uff0c\u540e\u7eed\u590d\u73b0\u90fd\u57fa\u4e8e Linux \u800c\u975e macOS\uff0cmacOS \u7684\u73af\u5883\u914d\u7f6e\u7b49\u6211\u6709\u7a7a\u4e86\u518d\u5199\uff08\u6bd5\u7adf\u672c\u5730\u8fd0\u884c\u6700\u65b9\u4fbf\uff09"}),"\n",(0,i.jsxs)(n.p,{children:["\u76ee\u524d macOS \u5931\u8d25\u7684\u539f\u56e0\uff1a",(0,i.jsx)(n.strong,{children:"OpenStudio \u4e0d\u652f\u6301 macOS ARM \u67b6\u6784"})]}),"\n",(0,i.jsx)(n.h1,{id:"\u8fdb\u884c\u6d4b\u8bd5",children:"\u8fdb\u884c\u6d4b\u8bd5"}),"\n",(0,i.jsx)(n.p,{children:"\u914d\u7f6e\u5b8c\u73af\u5883\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u6d4b\u8bd5\u4ee3\u7801\u770b\u770b\u6548\u679c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'from citylearn.citylearn import CityLearnEnv\nfrom pathlib import Path\nimport numpy as np\n\n# \u52a0\u8f7d CityLearn \u73af\u5883\nschema = Path(\'/root/CityLearn/data/datasets/citylearn_challenge_2021/schema.json\')\nenv = CityLearnEnv(schema=schema)\nprint("\u2705 Env loaded successfully!")\n\n# \u91cd\u7f6e\u73af\u5883\uff08Gymnasium \u98ce\u683c\uff09\nobs, info = env.reset()\n\n# \u6253\u5370\u5efa\u7b51\u6570\u91cf\u4e0eID\nprint("\u2705 Number of buildings:", len(env.buildings))\n\n# \u6253\u5370\u6bcf\u680b\u5efa\u7b51\u7684\u89c2\u6d4b\u957f\u5ea6\nobs_lens = [len(o) for o in obs]\nprint("\u2705 Observation lengths per building:", obs_lens)\n\n# \u793a\u4f8b\uff1a\u67e5\u770b\u7b2c\u4e00\u4e2a\u5efa\u7b51\u7684\u524d5\u4e2a\u7279\u5f81\nprint("\u2705 Sample observation (Building 1):", obs[0][:5])\n\n# \u5982\u679c\u8981\u8f6c\u6362\u4e3a\u77e9\u9635\uff0c\u53ef\u4ee5\u5148\u5bf9\u9f50\u957f\u5ea6\uff08\u53d6\u6700\u77ed\u957f\u5ea6\u6216\u8865\u96f6\uff09\nmin_len = min(obs_lens)\nobs_array = np.array([o[:min_len] for o in obs])\nprint("\u2705 Converted obs array shape:", obs_array.shape)\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6709\u4e94\u4e2a \u2705 \u5c31 ok \u4e86\uff0c\u8f93\u51fa\u7ed3\u679c\u5e94\u8be5\u5982\u4e0b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"(citylearnv2) root@autodl-container-491e4b9a34-9e5b11d5:~/CityLearn# python Untitled1.py\nCouldn't import dot_parser, loading of dot files will not be possible.\n\u2705 Env loaded successfully!\n\u2705 Number of buildings: 9\n\u2705 Observation lengths per building: [28, 27, 26, 27, 28, 28, 27, 27, 27]\n\u2705 Sample observation (Building 1): [1, 4, 1, 9.4, 10.020000457763672]\n\u2705 Converted obs array shape: (9, 26)\n"})}),"\n",(0,i.jsxs)(n.p,{children:["number of buildings \u53ef\u4ee5\u7406\u89e3\u4e3a agent \u7684\u6570\u91cf\uff0c\u6bcf\u4e00\u4e2a agent \u90fd\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u667a\u80fd\u4f53\uff0c\u5171\u4eab\u5929\u6c14\u3001\u7535\u4ef7\u3001\u78b3\u6392\u653e\u7b49\u5168\u5c40\u4fe1\u606f\uff0c\u5171\u540c\u5b66\u4e60\u534f\u8c03\u7b56\u7565\nObservation lengths per building \u662f\u6bcf\u4e2a agent \u7684\u7279\u5f81\u6570\u91cf\uff0c\u8fd9\u4e9b\u7279\u5f81\u53ef\u4ee5\u662f\n\u5f53\u524d\u7535\u4ef7\uff0cCO\u2082 \u5f3a\u5ea6\uff0c\u5f53\u524d\u65f6\u523b\uff0c\u8bbe\u5907\u80fd\u8017\uff08DHW\u3001TES\u3001Battery\uff09 \u7b49\nSample observation \u628a\u4e00\u680b\u5efa\u7b51\u7684\u7279\u5f81\u7f16\u7801\u6210\u4e00\u4e2a\u4e00\u7ef4\u6570\u7ec4\uff0c\u5177\u4f53\u542b\u4e49\u53d6\u51b3\u4e8e schema \u7684\u914d\u7f6e\uff08observations \u5b57\u6bb5\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff1a\n",(0,i.jsx)(n.img,{src:"http://8.130.141.48/wp-content/uploads/2025/11/17616169599159-scaled.jpg",alt:""}),"\nConverted obs array shape \u662f\u4f20\u5165\u5230\u6a21\u578b\u7684\u6570\u7ec4\uff0c\u662f\u4e00\u4e2a\u5927\u6574\u4f53\uff0c\u7528\u4e8e\u8bad\u7ec3"]}),"\n",(0,i.jsx)(n.h1,{id:"control-task-distribution",children:"Control task distribution"}),"\n",(0,i.jsx)(n.p,{children:"\u8be5\u7ae0\u8282\u8bbe\u8ba1\u4e86 17 \u4e2a\u4e0d\u540c\u7684\u63a7\u5236\u4efb\u52a1\uff0c\u5bf9\u6bd4 3 \u79cd\u63a7\u5236\u65b9\u5f0f + 4 \u79cd\u63a7\u5236\u76ee\u6807\u3002\u4e09\u79cd\u65b9\u6cd5\u5728\u4ee3\u7801\u4e2d\u7684\u672c\u8d28\u533a\u522b\u5c31\u662f reward \u4e0d\u540c\uff0c\u9700\u8981\u5728\u4f20\u5165 CityLearnEnv() \u65f6\uff0c\u81ea\u5b9a\u4e49 Reward Function"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u63a7\u5236\u5668"}),(0,i.jsx)(n.th,{children:"\u7b80\u4ecb"}),(0,i.jsx)(n.th,{children:"\u7c7b\u578b"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Baseline"})}),(0,i.jsx)(n.td,{children:"\u65e0\u63a7\u5236\uff0c\u76f4\u63a5\u8ddf\u968f\u8d1f\u8377\u66f2\u7ebf"}),(0,i.jsx)(n.td,{children:"\u88ab\u52a8"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"RBC (rule-based controller)"})}),(0,i.jsx)(n.td,{children:"\u624b\u5de5\u8bbe\u5b9a\u89c4\u5219\uff0c\u4f8b\u5982\u201c\u7535\u4ef7\u4f4e\u65f6\u5145\u7535\u201d"}),(0,i.jsx)(n.td,{children:"\u57fa\u51c6\u63a7\u5236"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"RLC (reinforcement learning controller)"})}),(0,i.jsx)(n.td,{children:"SAC \u7b97\u6cd5\u81ea\u52a8\u5b66\u4e60\u7b56\u7565"}),(0,i.jsx)(n.td,{children:"\u5f3a\u5316\u5b66\u4e60"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"1-cost-or-emission-reduction",children:"1. Cost or Emission Reduction"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u6700\u5c0f\u5316\u7535\u8d39\u6210\u672c\u6216\u78b3\u6392\u653e\u603b\u91cf\u4e3a KPI\uff0c\u8fdb\u884c\u4e09\u79cd\u65b9\u5f0f\u7684\u8bad\u7ec3"}),"\n",(0,i.jsx)(n.h3,{id:"11-\u5b9e\u9a8c\u8bbe\u7f6e",children:"1.1 \u5b9e\u9a8c\u8bbe\u7f6e"}),"\n",(0,i.jsx)(n.p,{children:"\u6570\u636e\u96c6\uff1a CityLearn Challenge 2023 (Phase 2 local evaluation)\n\u5efa\u7b51\uff1a 9 \u680b\u4f4f\u5b85\n\u63a7\u5236\u5bf9\u8c61\uff1a DHW (\u70ed\u6c34\u50a8\u80fd) \u6216 BESS + PV (\u7535\u6c60\u50a8\u80fd+\u5149\u4f0f)\n\u63a7\u5236\u53d8\u91cf\uff1a \u50a8\u80fd\u5145\u653e\u7535\u529f\u7387"}),"\n",(0,i.jsx)(n.h3,{id:"12-\u73af\u5883",children:"1.2 \u73af\u5883"}),"\n",(0,i.jsx)(n.p,{children:"Baseline \u2013 \u4e0d\u505a\u4efb\u4f55\u63a7\u5236\u3002\nRBC \u2013 \u624b\u52a8\u89c4\u5219\uff1a\n\u7535\u4ef7\u4f4e \u2192 \u5145\u80fd\uff1b\n\u7535\u4ef7\u9ad8 \u2192 \u653e\u80fd\u3002\nSAC \u2013 \u6df1\u5ea6\u5f3a\u5316\u5b66\u4e60\u81ea\u52a8\u5b66\u4e60\u6700\u4f18\u8c03\u5ea6"}),"\n",(0,i.jsx)(n.h3,{id:"13-\u4ee3\u7801",children:"1.3 \u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'from citylearn.citylearn import CityLearnEnv\nfrom citylearn.agents.base import BaselineAgent\nfrom citylearn.agents.rbc import BasicRBC\nfrom citylearn.agents.sac import SAC\nfrom pathlib import Path\n\ndef run(agent_class, schema, episodes=1, central_agent=True, save_dir=None, **kwargs):\n    print(f"\\n=== Running {agent_class.__name__} ===")\n    env = CityLearnEnv(schema, central_agent=central_agent)\n    agent = agent_class(env)\n    agent.learn(episodes=episodes, deterministic_finish=True)\n    results = env.evaluate()\n    env.close()\n    print(f"\u2705 {agent_class.__name__} finished.")\n    if save_dir:\n        Path(save_dir).mkdir(parents=True, exist_ok=True)\n        (Path(save_dir)/"metrics.txt").write_text(str(results))\n    return results\n\ndef main():\n    # \u4f7f\u7528\u672c\u5730\u6570\u636e\u96c6 schema\n    schema = "data/datasets/citylearn_challenge_2023_phase_2_local_evaluation/schema.json"\n\n    # 1 Baseline \u65e0\u63a7\u5236\n    res_base = run(BaselineAgent, schema, episodes=1, central_agent=True, save_dir="results/4_1_1_baseline")\n\n    # 2 RBC \u89c4\u5219\u63a7\u5236\n    res_rbc = run(BasicRBC, schema, episodes=1, central_agent=True, save_dir="results/4_1_1_rbc")\n\n    # 3 SAC \u5f3a\u5316\u5b66\u4e60\u63a7\u5236\n    res_sac = run(SAC, schema, episodes=5, central_agent=False, save_dir="results/4_1_1_sac")\n\n    # \u8f93\u51fa\u5bf9\u6bd4\u7ed3\u679c\n    print("\\n=== Comparison ===")\n    print("Baseline:", res_base)\n    print("RBC:", res_rbc)\n    print("SAC:", res_sac)\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u76ee\u7684\u662f\u5728\u76f8\u540c\u73af\u5883\u4e0b\uff0c\u4f9d\u6b21\u8fd0\u884c\u4e09\u79cd\u63a7\u5236\u7b56\u7565\uff08Baseline \u2192 RBC \u2192 SAC\uff09\uff0c\u5e76\u4fdd\u5b58\u7ed3\u679c\u3002\u4e3b\u4f53\u662f run \u51fd\u6570\uff0c\u5c31\u8be6\u7ec6\u8bb2\u4ed6\u4e86\nrun \u51fd\u6570\u662f\u4e00\u4e2a\u901a\u7528\u7684\u5b9e\u9a8c\u8fd0\u884c\u51fd\u6570\uff0c\u5206\u4e3a\u4e00\u4e0b\u6b65\u9aa4"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u521d\u59cb\u5316\u73af\u5883"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"env = CityLearnEnv(schema, central_agent=central_agent)\n"})}),"\n",(0,i.jsx)(n.p,{children:"CityLearnEnv \u662f CityLearn \u7684\u6838\u5fc3\u73af\u5883\u7c7b\uff0c\u5b83\u6839\u636e schema.json \u8bfb\u53d6\u57ce\u5e02\u80fd\u8017\u6570\u636e\uff08\u5efa\u7b51\u8d1f\u8377\u3001\u7535\u4ef7\u3001\u592a\u9633\u80fd\u3001\u5929\u6c14\u7b49\uff09\u3002\n\u53c2\u6570\uff1a\nschema: \u5b9a\u4e49\u6570\u636e\u6765\u6e90\u4e0e\u73af\u5883\u914d\u7f6e\uff08\u76f8\u5f53\u4e8e\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff09\ncentral_agent: \u662f\u5426\u4e3a\u96c6\u4e2d\u5f0f\u63a7\u5236\uff08True \u8868\u793a\u4e00\u4e2a\u667a\u80fd\u4f53\u63a7\u5236\u6240\u6709\u5efa\u7b51\uff09"}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u521d\u59cb\u5316\u667a\u80fd\u4f53"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"agent = agent_class(env)\n"})}),"\n",(0,i.jsx)(n.p,{children:"BaselineAgent\uff1a\u5b8c\u5168\u4e0d\u505a\u63a7\u5236\uff08\u4ec5\u88ab\u52a8\u6267\u884c\u73af\u5883\u52a8\u4f5c\uff09\nBasicRBC\uff1a\u57fa\u4e8e\u89c4\u5219\u7684\u63a7\u5236\uff08Rule-Based Control\uff09\nSAC\uff1a\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5 Soft Actor-Critic \u63a7\u5236\u5668"}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"\u8bad\u7ec3\u667a\u80fd\u4f53"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"agent.learn(episodes=episodes, deterministic_finish=True)\n"})}),"\n",(0,i.jsx)(n.p,{children:"episodes\uff1a\u8bad\u7ec3\u8f6e\u6570\uff08\u4f60\u7ed9 Baseline/RBC \u5404 1 \u6b21\uff0cSAC \u7ed9 5 \u6b21\uff09\ndeterministic_finish=True\uff1a\u5728\u6700\u540e\u4e00\u4e2a episode \u4ee5\u786e\u5b9a\u6027\u65b9\u5f0f\u7ed3\u675f\uff08\u7528\u4e8e\u8bc4\u4f30)"}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:"\u8bc4\u4f30\u7ed3\u679c"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"results = env.evaluate()\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd4\u56de\u4e00\u4e2a\u6027\u80fd\u6307\u6807\u5b57\u5178\uff0c\u5982\u80fd\u8017\u3001\u5cf0\u503c\u8d1f\u8377\u3001\u78b3\u6392\u653e\u3001\u6210\u672c\u7b49"}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"\u6253\u5370\u4e0e\u4fdd\u5b58"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"14-\u95ee\u9898\u6c47\u603b",children:"1.4 \u95ee\u9898\u6c47\u603b"}),"\n",(0,i.jsx)(n.h4,{id:"141-rbc\u89c4\u5219\u63a7\u5236\u7684\u89c4\u5219\u662f\u4ec0\u4e48\u4ee3\u7801\u4e2d\u600e\u4e48\u4f53\u73b0",children:"1.4.1 RBC\uff08\u89c4\u5219\u63a7\u5236\uff09\u7684\u89c4\u5219\u662f\u4ec0\u4e48\uff1f\u4ee3\u7801\u4e2d\u600e\u4e48\u4f53\u73b0\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"RBC\uff08Rule-Based Control\uff09\u662f \u57fa\u4e8e\u4eba\u5de5\u7ecf\u9a8c\u89c4\u5219\u7684\u63a7\u5236\u7b56\u7565\u3002\u5728 CityLearn \u4e2d\uff0cRBC \u4e3b\u8981\u8d1f\u8d23\u63a7\u5236\u6bcf\u680b\u5efa\u7b51\u7684\u50a8\u80fd\u8bbe\u5907\uff08\u7535\u6c60\uff09\u4f55\u65f6\u5145\u7535\u3001\u4f55\u65f6\u653e\u7535\u3002\n\u9ed8\u8ba4\u89c4\u5219\u5982\u4e0b\uff1a\n\u5f53\u7535\u4ef7\u4f4e\uff08off-peak\uff09\u65f6 \u2192 \u5145\u7535\n\u5f53\u7535\u4ef7\u9ad8\uff08peak\uff09\u65f6 \u2192 \u653e\u7535\n\u82e5\u7535\u6c60\u6ee1\u6216\u7a7a \u2192 \u4e0d\u52a8\u4f5c\n\u903b\u8f91\u5b9a\u4e49\u5728 city learn \u5305\u7684\u8be5\u6587\u4ef6\u4e2d\uff1acitylearn/agents/rbc.py\u3002\u7b80\u5355\u7684\u6765\u8bf4\uff0c\u5c31\u662f\u4e00\u4e2a if else \u800c\u5df2"}),"\n",(0,i.jsx)(n.h4,{id:"142-sac\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5",children:"1.4.2. SAC\uff08\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\uff09\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"SAC \u662f Soft Actor-Critic\uff09\u7b97\u6cd5\uff0c\u57fa\u4e8e\u6700\u5927\u71b5\u5f3a\u5316\u5b66\u4e60\uff08Maximum Entropy RL\uff09\u7684\u8fde\u7eed\u52a8\u4f5c\u63a7\u5236\u7b97\u6cd5\u3002\u5c31\u8ddf\u6d41\u7a0b\u56fe\u4e2d\u7684\u4e00\u6837\uff0c\u6709\u4e09\u90e8\u5206\u6784\u6210"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6a21\u5757"}),(0,i.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,i.jsx)(n.th,{children:"\u529f\u80fd"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Actor"}),(0,i.jsx)(n.td,{children:"\u7b56\u7565\u7f51\u7edc"}),(0,i.jsx)(n.td,{children:"\u751f\u6210\u52a8\u4f5c\u5206\u5e03"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Critic\u2081 / Critic\u2082"}),(0,i.jsx)(n.td,{children:"Q \u7f51\u7edc"}),(0,i.jsx)(n.td,{children:"\u8bc4\u4f30\u52a8\u4f5c\u4ef7\u503c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Target Critic"}),(0,i.jsx)(n.td,{children:"\u76ee\u6807\u7f51\u7edc"}),(0,i.jsx)(n.td,{children:"\u7a33\u5b9a\u8bad\u7ec3"})]})]})]}),"\n",(0,i.jsx)(n.h4,{id:"143-rbc-\u89c4\u5219\u80fd\u5426\u81ea\u5b9a\u4e49",children:"1.4.3. RBC \u89c4\u5219\u80fd\u5426\u81ea\u5b9a\u4e49"}),"\n",(0,i.jsx)(n.p,{children:"BasicRBC \u662f CityLearn \u81ea\u5e26\u7684\u9ed8\u8ba4\u89c4\u5219\u63a7\u5236\u5668\uff08\u5b9a\u4e49\u5728 rbc.py\uff09\u3002\u4f46\u5b8c\u5168\u53ef\u4ee5\u81ea\u5b9a\u4e49\u81ea\u5df1\u7684\u89c4\u5219\u3002\u53ea\u9700\u7ee7\u627f\u57fa\u7c7b\u5e76\u91cd\u5199 select_actions()\u5373\u53ef\n\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"from citylearn.agents.base import BaseAgent\n\nclass MyRBC(BaseAgent):\n    def select_actions(self, observations):\n        actions = []\n        for obs in observations:\n            price = obs['electricity_price']\n            soc = obs['storage_soc']\n            solar = obs['solar_generation']\n            if price < 0.05 and solar > 0:\n                action = 1.0      # \u52a0\u5f3a\u5145\u7535\n            elif price > 0.2 or soc > 0.8:\n                action = -1.0     # \u653e\u7535\n            else:\n                action = 0.0\n            actions.append(action)\n        return actions\n\nrun(MyRBC, schema, episodes=1, central_agent=True)\n"})}),"\n",(0,i.jsx)(n.h4,{id:"144-sac-\u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u662f\u5426\u548c\u95ee\u9898-3-\u4e00\u6837",children:"1.4.4. SAC \u5f3a\u5316\u5b66\u4e60\u63a7\u5236\u662f\u5426\u548c\u95ee\u9898 3 \u4e00\u6837\uff1f"}),"\n",(0,i.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u548c\u95ee\u9898 3 \u4e00\u6837\uff0c\u81ea\u5b9a\u4e49\uff0c\u53ea\u8981\u5b9e\u73b0\u76f8\u540c\u63a5\u53e3\u5373\u53ef\n\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"from citylearn.agents.base import BaseAgent\nfrom stable_baselines3 import PPO\n\nclass PPOAgent(BaseAgent):\n    def __init__(self, env):\n        super().__init__(env)\n        self.model = PPO('MlpPolicy', env, verbose=1)\n\n    def learn(self, episodes=1, **kwargs):\n        self.model.learn(total_timesteps=episodes * len(self.env.time_steps))\n\n    def select_actions(self, observations):\n        action, _ = self.model.predict(observations, deterministic=True)\n        return action\n\nrun(PPOAgent, schema, episodes=5, central_agent=False)\n"})}),"\n",(0,i.jsx)(n.p,{children:"ps\uff1aschema \u6587\u4ef6\u4e2d reward_function \u914d\u7f6e\uff08\u5177\u4f53\u5728 2.2 \u4e2d\u89e3\u91ca\uff09"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"reward_function": {\n  "type": "citylearn.reward_function.RewardFunction",\n  "attributes": {\n    "electricity_cost_weight": 0.6,\n    "emission_weight": 0.4,\n    "peak_to_average_ratio_weight": 0.0\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"2-peak-reduction",children:"2. Peak Reduction"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5\u524a\u51cf\u793e\u533a\u603b\u529f\u7387\u5cf0\u503c\u4e3a KPI\uff0c\u8fdb\u884c\u4e09\u79cd\u65b9\u5f0f\u7684\u8bad\u7ec3"}),"\n",(0,i.jsx)(n.h3,{id:"21-\u73af\u5883",children:"2.1 \u73af\u5883"}),"\n",(0,i.jsx)(n.p,{children:"RBC \u4ecd\u6309\u89c4\u5219\u4e0a\u8ff0\u8fd0\u884c\nSAC \u81ea\u52a8\u5b66\u4f1a\u9519\u5cf0\u64cd\u4f5c\u2014\u2014\u8ba9\u5404\u5efa\u7b51\u5728\u4e0d\u540c\u65f6\u95f4\u653e\u7535\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"22-\u4ee3\u7801",children:"2.2 \u4ee3\u7801"}),"\n",(0,i.jsx)(n.p,{children:"4.1.2 \u8282\u4e2d\u660e\u786e\u6307\u51fa\uff0c\u5b9e\u9a8c\u76ee\u6807\u53d8\u4e3a\u964d\u4f4e\u5cf0\u503c\u8d1f\u8377\uff08district-level daily peak load\uff09\u3002\u6587\u4e2d\u8bf4\u660e\uff1a\n\u201cConfigurations with peak reduction objective\u2026 The RBC has been fine-tuned to target energy discharge during peak periods\u2026\u201d"}),"\n",(0,i.jsx)(n.p,{children:"\u800c\u5728 CityLearn \u73af\u5883\u4e2d\uff0cKPI \u7531 reward_function \u63a7\u5236\u3002\u6240\u4ee5\u8981\u628a 4.1.1 \u7684\u201ccost / emission minimization\u201d \u6539\u6210 4.1.2 \u7684\u201cpeak reduction\u201d\uff0c\u53ea\u9700\u5728 schema.json \u91cc\u4fee\u6539 reward \u914d\u7f6e\u5373\u53ef\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"reward_function": {\n  "type": "citylearn.reward_function.RewardFunction",\n  "attributes": {\n    "electricity_cost_weight": 0.0,\n    "emission_weight": 0.0,\n    "peak_to_average_ratio_weight": 1.0\n  }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5176\u4ed6\u4ee3\u7801\u4e0e 4.1.1 \u76f8\u540c"}),"\n",(0,i.jsx)(n.h2,{id:"3-discomfort-and-electricity-consumption-reduction",children:"3. Discomfort and Electricity Consumption Reduction"}),"\n",(0,i.jsx)(n.p,{children:"KPI \u4e3a\u5728\u8282\u80fd\u7684\u540c\u65f6\u7ef4\u6301\u8212\u9002\u5ea6\uff08\u4f9b\u6696\u3001\u70ed\u6c34\u6e29\u5ea6\u7b49\uff09"}),"\n",(0,i.jsx)(n.h2,{id:"31-\u4ee3\u7801",children:"3.1 \u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'"reward_function": {\n  "type": "citylearn.reward_function.ComfortReward",\n  "attributes": {\n    "band": 1.0,\n    "lower_exponent": 2.0,\n    "higher_exponent": 3.0,\n    "m": 3.0,\n    "mode": "cooling"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"summary"}),"\n",(0,i.jsx)(n.p,{children:"\u5728 4.1 \u90e8\u5206\u7684\u5b9e\u9a8c\u4e2d\uff0c\u901a\u8fc7\u4fee\u6539 schema.json \u4e2d\u7684 reward_function \u914d\u7f6e\u5373\u53ef\u5207\u6362\u4e0d\u540c\u7684\u6027\u80fd\u8bc4\u4ef7\u6307\u6807\uff08KPI\uff09\u4e0e\u63a7\u5236\u76ee\u6807\uff0c\u4ece\u800c\u5b9e\u73b0\u57fa\u4e8e\u4e0d\u540c\u4f18\u5316\u76ee\u6807\u7684\u7b56\u7565\u8bad\u7ec3"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7c7b\u540d"}),(0,i.jsx)(n.th,{children:"\u6240\u5c5e\u6a21\u5757"}),(0,i.jsx)(n.th,{children:"\u7b80\u8981\u8bf4\u660e"}),(0,i.jsx)(n.th,{children:"\u53ef\u914d\u53c2\u6570\uff08kwargs/attributes\uff09\u793a\u4f8b"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RewardFunction"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u9ed8\u8ba4\u901a\u7528\u5956\u52b1\u51fd\u6570\uff0c\u60e9\u7f5a\u4ece\u7f51\u683c\u8d2d\u4e70\u7535\u529b\u3002 ([citylearn.net][1])"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"exponent"}),"\uff08\u5982 1.0\uff09\u3001",(0,i.jsx)(n.code,{children:"charging_constraint_penalty_coefficient"})," \u7b49"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"MARL"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u7528\u4e8e\u591a\u4f53\uff08multi-agent\uff09\u573a\u666f\u7684\u5956\u52b1\u51fd\u6570"}),(0,i.jsx)(n.td,{children:"\u65e0\u6216\u5c11\u91cf\u989d\u5916\u53c2\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"IndependentSACReward"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u63a8\u8350\u7528\u4e8e\u6bcf\u5efa\u7b51\u72ec\u7acb agent \u7684 SAC \u63a7\u5236\u5668\u5956\u52b1\u3002"}),(0,i.jsx)(n.td,{children:"\u65e0\u6216\u5c11\u91cf\u53c2\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SolarPenaltyReward"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u9f13\u52b1\u51c0\u96f6\uff0f\u6700\u5927\u5316\u81ea\u53d1\u7535\u3001\u51cf\u5c11\u4ece\u7535\u7f51\u8d2d\u7535\u3002"}),(0,i.jsx)(n.td,{children:"\u9ed8\u8ba4\u884c\u4e3a\uff0c\u65e0\u9700\u989d\u5916\u53c2\u6570\u6216\u53ef\u914d\u7f6e\u53c2\u6570\u5982\u7cfb\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ComfortReward"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u4ee5\u5ba4\u5185\u6e29\u5ea6\u504f\u5dee\uff08\u8212\u9002\u5ea6\uff09\u4e3a\u76ee\u6807\u7684\u5956\u52b1\u51fd\u6570\u3002"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"band"}),"\uff08\u8212\u9002\u5e26\u5bbd\uff09\u3001",(0,i.jsx)(n.code,{children:"lower_exponent"}),"\u3001",(0,i.jsx)(n.code,{children:"higher_exponent"})," \u7b49"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SolarPenaltyAndComfortReward"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"citylearn.reward_function"})}),(0,i.jsx)(n.td,{children:"\u7ed3\u5408\u592a\u9633\u80fd\u60e9\u7f5a + \u8212\u9002\u5ea6\u60e9\u7f5a\u7684\u6df7\u5408\u578b\u5956\u52b1\u3002"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"band"}),"\u3001",(0,i.jsx)(n.code,{children:"lower_exponent"}),"\u3001",(0,i.jsx)(n.code,{children:"higher_exponent"}),"\u3001",(0,i.jsx)(n.code,{children:"coefficients"})," \u7b49"]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["\u6240\u6709\u7684 reward_function \u53ef\u4ee5\u5728\u8fd9\u770b\uff1a",(0,i.jsx)(n.a,{href:"https://www.citylearn.net/api/citylearn.reward_function.html?utm_source=chatgpt.com",children:"https://www.citylearn.net/api/citylearn.reward_function.html?utm_source=chatgpt.com"})]}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u7136\uff0c\u4ee5\u4e0a\u4ec5\u9488\u5bf9 SAC\uff0c\u5982\u679c\u662f RBC\uff0c\u9700\u8981\u4fee\u6539 rbc.py \u6587\u4ef6\u91cc\u7684\u7b56\u7565\uff0c\u4e0d\u8fc7\u6211\u89c9\u5f97\u91cd\u70b9\u662f SAC\uff0c\u6240\u4ee5\u6682\u4e14\u5c31\u5148\u4e0d\u7ba1 RBC \u7684\u89c4\u5219\u4fee\u6539\u4e86"}),"\n",(0,i.jsx)(n.h1,{id:"energy-storage-system-control-in-representative-single-family-neighborhoods",children:"Energy storage system control in representative single-family neighborhoods"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c\u8bf4 4.1 \u662f\u591a\u76ee\u6807\u57fa\u51c6\u6d4b\u8bd5\uff08\u73af\u5883\u56fa\u5b9a\uff0c\u63a7\u5236\u7b97\u6cd5\u56fa\u5b9a\uff0cKPI \u4e0d\u540c\uff09\uff0c\u90a3 4.2 \u5c31\u662f",(0,i.jsx)(n.strong,{children:"\u4e0d\u540c\u5efa\u7b51\u7c7b\u578b\uff08\u5982\u5355\u5c42\u623f\u3001\u591a\u5c42\u623f\u3001\u5e26\u592a\u9633\u80fd\u7684\u623f\u5c4b\uff09\u5177\u6709\u4e0d\u540c\u8d1f\u8377\u7279\u6027\u4e0e\u50a8\u80fd\u9700\u6c42\uff0c\u540c\u6837\u7684\u63a7\u5236\u7b97\u6cd5\u5728\u8fd9\u4e9b\u201c\u4ee3\u8868\u6027\u4f4f\u5b85\u201d\u4e0a\u4f1a\u8868\u73b0\u51fa\u4e0d\u540c\u7684\u80fd\u8017\u52a8\u6001\u3002"})]}),"\n",(0,i.jsx)(n.h2,{id:"1-\u91cd\u70b9",children:"1. \u91cd\u70b9"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u91c7\u7528\u76f8\u540c\u7684 RL \u63a7\u5236\u7b56\u7565\uff08\u901a\u5e38\u662f SAC\uff09\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u5728\u4e0d\u540c\u7684 \u201crepresentative neighborhoods\u201d schema \u4e0a\u8fd0\u884c\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u6bd4\u8f83\u7ed3\u679c\n\xb7 \u7535\u6c60\u5145\u653e\u7535\u66f2\u7ebf (SOC)\n\xb7 \u8d1f\u8377\u66f2\u7ebf\u5e73\u6ed1\u7a0b\u5ea6\n\xb7 \u6210\u672c\u6216\u78b3\u6392\u7ed3\u679c\u5dee\u5f02"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"2-\u533a\u522b",children:"2. \u533a\u522b"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u9879\u76ee"}),(0,i.jsx)(n.th,{children:"4.1 \u90e8\u5206"}),(0,i.jsx)(n.th,{children:"4.2 \u90e8\u5206"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5b9e\u9a8c\u4e3b\u9898"})}),(0,i.jsx)(n.td,{children:"Benchmark \u5b9e\u9a8c\uff1a\u5728\u7edf\u4e00\u57ce\u5e02\u793e\u533a\u4e0b\u6d4b\u8bd5\u4e0d\u540c KPI\uff08\u6210\u672c\u3001\u78b3\u6392\u3001\u5cf0\u503c\u3001\u8212\u9002\u5ea6\uff09"}),(0,i.jsxs)(n.td,{children:["\u5e94\u7528\u5b9e\u9a8c\uff1a\u6d4b\u8bd5\u63a7\u5236\u7b97\u6cd5\u5728",(0,i.jsx)(n.strong,{children:"\u4ee3\u8868\u6027\u4f4f\u5b85\u793e\u533a"}),"\u7684\u771f\u5b9e\u50a8\u80fd\u63a7\u5236\u6027\u80fd"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5b9e\u9a8c\u76ee\u6807\uff08KPI\uff09"})}),(0,i.jsx)(n.td,{children:"\u5207\u6362\u4e0d\u540c reward_function\uff0c\u6bd4\u8f83\u4e0d\u540c\u4f18\u5316\u76ee\u6807"}),(0,i.jsx)(n.td,{children:"\u56fa\u5b9a reward\uff08\u901a\u5e38\u662f cost/emission\uff09\uff0c\u8003\u5bdf\u7b97\u6cd5\u5728\u4e0d\u540c\u5efa\u7b51\u7c7b\u578b\u4e0b\u7684\u884c\u4e3a\u5dee\u5f02"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u63a7\u5236\u7ed3\u6784"})}),(0,i.jsx)(n.td,{children:"\u96c6\u4e2d\u5f0f\u6216\u534a\u96c6\u4e2d\u5f0f\u63a7\u5236\uff08central_agent \u53ef True\uff09"}),(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.strong,{children:"\u5206\u5e03\u5f0f\u63a7\u5236"}),"\uff08central_agent=False\uff0c\u6bcf\u680b\u5efa\u7b51\u72ec\u7acb agent\uff09"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u73af\u5883\u89c4\u6a21"})}),(0,i.jsx)(n.td,{children:"\u901a\u5e38\u662f\u5b8c\u6574\u57ce\u5e02\u6216\u533a\u57df\uff08\u591a\u4e2a\u4f4f\u5b85+\u5546\u7528\u5efa\u7b51\uff09"}),(0,i.jsx)(n.td,{children:"\u7f29\u5c0f\u5230\u5355\u5bb6\u5ead\u6216\u5c11\u91cf\u4ee3\u8868\u6027\u4f4f\u5b85\u7fa4"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u91cd\u70b9\u5206\u6790"})}),(0,i.jsx)(n.td,{children:"\u201c\u4e0d\u540c KPI \u4e0b\u7684\u4f18\u5316\u76ee\u6807\u201d"}),(0,i.jsx)(n.td,{children:"\u201c\u50a8\u80fd\u7cfb\u7edf\u5728\u73b0\u5b9e\u4f4f\u5b85\u573a\u666f\u4e2d\u7684\u52a8\u6001\u63a7\u5236\u8868\u73b0\u201d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u8f93\u51fa\u6307\u6807"})}),(0,i.jsx)(n.td,{children:"reward \u66f2\u7ebf\u3001\u603b\u80fd\u8017\u3001PAR"}),(0,i.jsx)(n.td,{children:"\u6bcf\u6237\u5efa\u7b51\u7684\u7535\u6c60 SOC \u66f2\u7ebf\u3001\u529f\u7387\u8d1f\u8377\u3001\u5cf0\u503c\u53d8\u5316\u8d8b\u52bf"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"3-\u4ee3\u7801",children:"3. \u4ee3\u7801"}),"\n",(0,i.jsx)(n.p,{children:"\u548c 4.1 \u5176\u5b9e\u5927\u540c\u5c0f\u5f02\uff0ccentral_agent=False \u5373\u53ef\uff0c\u7a81\u51fa\u5404 agent \u5355\u72ec\u8bad\u7ec3"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# ============================================================\n# CityLearn 4.2 \u5b9e\u9a8c\u590d\u73b0: Energy storage system control\n# \u53c2\u8003\u8bba\u6587 Section 4.2\n# ============================================================\n\nfrom citylearn.citylearn import CityLearnEnv\nfrom citylearn.agents.base import BaselineAgent\nfrom citylearn.agents.rbc import BasicRBC\nfrom citylearn.agents.sac import SAC\nfrom pathlib import Path\nfrom debug_sac import DebugSAC  # \u2705 \u4f7f\u7528\u8c03\u8bd5\u7248\u672c\uff0c\u4e0d\u6539\u5e93\n\n\n\n# \u6d4b\u8bd5\u7528\uff0c\u4ec5\u4f7f\u7528n\u680bbuildings\ndef run(agent_class, schema, episodes=1, central_agent=False, save_dir=None):\n    print(f"\\n=== Running {agent_class.__name__} | Central Agent = {central_agent} ===")\n\n    # \u2705 \u6b63\u786e\u9009\u62e9\u524d\u4e09\u680b\u5efa\u7b51\n    env_full = CityLearnEnv(schema, central_agent=central_agent)\n    selected_buildings = env_full.buildings[:20]\n    env_full.close()\n\n    # \u2705 \u75283\u680b\u5efa\u7b51\u521b\u5efa\u65b0\u73af\u5883\n    env = CityLearnEnv(schema, buildings=selected_buildings, central_agent=central_agent)\n    env.reset()\n\n    agent = agent_class(env)\n    agent.learn(episodes=episodes, deterministic_finish=True)\n\n    results = env.evaluate()\n    env.close()\n\n    print(f"\u2705 {agent_class.__name__} finished.")\n    print(f"\ud83d\udcca Results: {results}")\n\n    if save_dir:\n        Path(save_dir).mkdir(parents=True, exist_ok=True)\n        (Path(save_dir) / "metrics.txt").write_text(str(results))\n\n    return results\n\n\n# def run(agent_class, schema, episodes=1, central_agent=False, save_dir=None):\n#     print(f"\\n=== Running {agent_class.__name__} | Central Agent = {central_agent} ===")\n\n#     # \u2705 \u521b\u5efa\u73af\u5883\n#     env = CityLearnEnv(schema, buildings=env.buildings[:3], central_agent=False)\n#     # env = CityLearnEnv(schema, central_agent=central_agent)\n#     env.reset()\n\n#     # \u2705 \u521b\u5efa Agent\n#     agent = agent_class(env)\n\n#     # \u2705 \u8bad\u7ec3 Agent\uff08Baseline / RBC \u4f1a\u81ea\u52a8\u8df3\u8fc7 learn\uff09\n#     agent.learn(episodes=episodes, deterministic_finish=True)\n\n#     # \u2705 \u8bc4\u4f30\u6307\u6807\n#     results = env.evaluate()\n#     env.close()\n\n#     print(f"\u2705 {agent_class.__name__} finished.")\n#     print(f"\ud83d\udcca Results: {results}")\n\n#     # \u2705 \u4fdd\u5b58\u7ed3\u679c\n#     if save_dir:\n#         Path(save_dir).mkdir(parents=True, exist_ok=True)\n#         (Path(save_dir) / "metrics.txt").write_text(str(results))\n\n#     return results\n\ndef main():\n    schema = "data/datasets/ca_alameda_county_neighborhood/schema.json"\n    central_agent = False\n\n    # Baseline\n    run(\n        agent_class=BaselineAgent,\n        schema=schema,\n        episodes=1,\n        central_agent=central_agent,\n        save_dir="results/4_2_baseline_CA"\n    )\n\n    # RBC\n    run(\n        agent_class=BasicRBC,\n        schema=schema,\n        episodes=1,\n        central_agent=central_agent,\n        save_dir="results/4_2_rbc_CA"\n    )\n\n    # SAC\n    run(\n        agent_class=DebugSAC,\n        schema=schema,\n        episodes=5,\n        central_agent=central_agent,\n        save_dir="results/4_2_sac_CA"\n    )\n\nif __name__ == "__main__":\n    main()\n\n'})}),"\n",(0,i.jsx)(n.h2,{id:"4-\u62a5\u9519",children:"4. \u62a5\u9519"}),"\n",(0,i.jsx)(n.h3,{id:"41-assertionerror",children:"4.1 AssertionError"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"AssertionError: demand is greater than heating_device max output | timestep: 0, building: resstock-amy2018-2021-release-1-122940, outage: False, demand: 3.1614, output: 2.9663, difference: 0.1950\n"})}),"\n",(0,i.jsx)(n.p,{children:"CityLearn \u5728 building.py \u91cc\u5199\u4e86\u5b89\u5168\u68c0\u67e5,\u7c7b\u578b\u5982\u4e0b"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u539f\u56e0\u7c7b\u578b"}),(0,i.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,i.jsx)(n.th,{children:"\u662f\u5426\u81f4\u547d"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"1\ufe0f\u20e3 \u6570\u636e\u5f02\u5e38"})}),(0,i.jsx)(n.td,{children:"\u67d0\u4e2a\u4f4f\u5b85\u5728\u8f93\u5165\u6570\u636e\uff08\u6e29\u5ea6 / \u8d1f\u8377\uff09\u9996\u5c0f\u65f6\u6570\u503c\u5f02\u5e38\uff0c\u4f7f heating_demand \u8d85\u51fa\u8bbe\u5907\u989d\u5b9a\u529f\u7387"}),(0,i.jsx)(n.td,{children:"\u274c \u53ef\u8df3\u8fc7"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"2\ufe0f\u20e3 \u6a21\u578b\u521d\u59cb\u5316\u8bef\u5dee"})}),(0,i.jsx)(n.td,{children:"\u5728 simulation_start_time_step=0 \u65f6\uff0c\u7cfb\u7edf\u72b6\u6001\u8fd8\u6ca1\u521d\u59cb\u5316\u5b8c\u5168\uff0c\u51fa\u73b0\u8f7b\u5fae\u4e0d\u4e00\u81f4"}),(0,i.jsx)(n.td,{children:"\u274c \u53ef\u5ffd\u7565"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"3\ufe0f\u20e3 \u6e29\u63a7\u6a21\u578b\u7cbe\u5ea6\u95ee\u9898"})}),(0,i.jsx)(n.td,{children:"HVAC \u6a21\u578b\u5728\u67d0\u4e9b\u65f6\u523b\u8ba1\u7b97\u7684 heat_demand \u4e0e\u8bbe\u5907\u53c2\u6570\u6709\u5fae\u5c0f\u8bef\u5dee"}),(0,i.jsx)(n.td,{children:"\u274c \u53ef\u901a\u8fc7\u5bb9\u5dee\u53c2\u6570\u653e\u5bbd"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u53ef\u4ee5\u6253\u5f00 citylearn/building.py\n\u67e5\u627e\u5e76\u4fee\u6539\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# before\nassert self.power_outage or demand <= max_device_output or abs(demand - max_device_output) < TOLERANCE, \\\n    f"demand is greater than heating_device max output | ..."\n\n# now\nif not (self.power_outage or demand <= max_device_output or abs(demand - max_device_output) < TOLERANCE):\n    print(f"[Warning] demand > heating_device max output at timestep {self.time_step}")\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6216\u8005\u8dd1\u4ee3\u7801\u7684\u65f6\u5019\u76f4\u63a5 python -O run_4_2.py\uff08\u5ffd\u7565\u6240\u6709 assert \u8bed\u53e5\uff09"}),"\n",(0,i.jsx)(n.p,{children:"\u6216\u8005\u628a\u5bb9\u5fcd\u5ea6\u4ece 1e-4 \u6539\u5927\u4e00\u4e9b\u4e5f\u884c"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"TOLERANCE = 1e-4\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f46\u662f\u603b\u4f53\u800c\u8a00\u95ee\u9898\u4e0d\u5927\uff0c\u8bba\u6587\u91cc\u8bf4\u4e86\uff0c\u5728\u57fa\u4e8e ResStock \u7684\u5efa\u7b51\u6570\u636e\u4e2d\uff0c\u7531\u4e8e\u7f29\u653e\u5dee\u5f02\uff0c\u521d\u59cb\u5316\u65f6\u53ef\u80fd\u4f1a\u51fa\u73b0\u8f7b\u5fae\u7684\u8bbe\u5907\u5bb9\u91cf\u8d85\u9650\uff0c\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u5b9e\u9a8c\u7ed3\u679c\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"42-typeerror-new-data-must-be-a-sequence-got-nonetype",children:"4.2 TypeError: new(): data must be a sequence (got NoneType)"}),"\n",(0,i.jsx)(n.p,{children:"\u5148\u770b\u62a5\u9519\u5185\u5bb9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'(citylearnv2) root@autodl-container-491e4b9a34-9e5b11d5:~/CityLearn# python -O run_4_2.py\nCouldn\'t import dot_parser, loading of dot files will not be possible.\n\n=== Running SAC ===\nTraceback (most recent call last):\n  File "/root/CityLearn/run_4_2.py", line 44, in <module>\n    main()\n  File "/root/CityLearn/run_4_2.py", line 40, in main\n    run(SAC, schema, episodes=5, central_agent=central_agent,\n  File "/root/CityLearn/run_4_2.py", line 16, in run\n    agent.learn(episodes=episodes, deterministic_finish=True)\n  File "/root/CityLearn/citylearn/agents/base.py", line 156, in learn\n    actions = self.predict(observations, deterministic=deterministic)\n  File "/root/CityLearn/citylearn/agents/sac.py", line 189, in predict\n    actions = self.get_post_exploration_prediction(observations, deterministic)\n  File "/root/CityLearn/citylearn/agents/sac.py", line 206, in get_post_exploration_prediction\n    o = torch.FloatTensor(o).unsqueeze(0).to(self.device)\nTypeError: new(): data must be a sequence (got NoneType)\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u5e38\u89c1\u6210\u56e0\u5982\u4e0b"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u521d\u59cb\u5316\u89c2\u6d4b\u6ca1\u51c6\u5907\u597d\n\u90e8\u5206\u7248\u672c/\u6570\u636e\uff08\u5c24\u5176 LSTM/ResStock \u5efa\u7b51\uff09\u5728\u521b\u5efa\u540e\u7b2c\u4e00\u62cd\u7684\u89c2\u6d4b\u53ef\u80fd\u4e3a\u7a7a\uff1a\n\xb7 \u6ca1 reset()\n\xb7 \u6216 reset() \u8fd4\u56de\u5b8c\u7b2c\u4e00\u5e27\u4ecd\u9700\u8981\u4e00\u4e2a\u201c\u70ed\u8eab step\u201d\u624d\u6709\u6709\u6548 obs"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:'schema \u7684\u89c2\u6d4b\u88ab\u5173\u4e86\n\u5982\u679c root.observations \u91cc\u5168\u90fd "active": false\uff0c\u6216\u67d0\u4e9b\u5efa\u7b51\u5728 buildings.*.inactive_observations \u91cc\u628a\u6240\u6709\u53ef\u89c2\u6d4b\u91cf\u90fd\u7981\u7528\u4e86\uff0c\u8be5\u5efa\u7b51\uff08\u751a\u81f3\u5168\u5c40\uff09\u89c2\u6d4b\u4f1a\u53d8\u6210 None/\u7a7a\u3002'}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u89c2\u6d4b\u5f62\u6001\u4e0d\u5339\u914d\ncentral_agent=True \u2192 \u671f\u671b\u5f97\u5230\u201c\u4e00\u4e2a\u8054\u5408\u5411\u91cf\u201d\uff1b\ncentral_agent=False \u2192 \u671f\u671b\u201c\u6bcf\u680b\u4e00\u4e2a\u5411\u91cf\u7684\u5217\u8868\u201d\u3002\n\u5982\u679c\u6709\u5efa\u7b51 include: false / \u89c2\u6d4b\u88ab\u88c1\uff0c\u5217\u8868\u91cc\u5c31\u4f1a\u6df7\u5165 None\u3002"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"PS\uff1a\u592a\u4ed6\u5988\u53d8\u6001\u4e86\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd9\u4e2a error \u5361\u4e86\u6211\u5c06\u8fd1\u4e00\u5468\u624d\u77e5\u9053\u54ea\u91cc\u51fa\u73b0\u4e86\u95ee\u9898"})}),"\n",(0,i.jsx)(n.p,{children:"\u89e3\u51b3\u65b9\u6cd5\uff08\u8fc7\u4e8e\u53d8\u6001\uff0c\u6211\u9009\u62e9\u8bb2\u6211\u600e\u4e48\u89e3\u51b3\u7684\uff09"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u4ece\u6570\u636e\u96c6\u5165\u624b\n\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e0b\u8fd9\u4e2a\u4ee3\u7801\uff0c\u5148\u67e5\u770b building \u548c obs \u91cc\u6709\u6ca1\u6709 none"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# inspect_schema.py\nimport json, sys, argparse, os\nfrom typing import Any, Dict, List\n\ndef load_schema(path: str) -> Dict[str, Any]:\n    txt = open(path, \'r\', encoding=\'utf-8\').read()\n    # \u5148\u5c1d\u8bd5 JSON\n    try:\n        data = json.loads(txt)\n    except Exception:\n        # \u53ef\u9009\uff1aYAML\uff08\u82e5\u5b89\u88c5\u4e86 PyYAML\uff09\n        try:\n            import yaml  # pip install pyyaml\n            data = yaml.safe_load(txt)\n        except Exception as e:\n            print(f"\u274c \u65e2\u4e0d\u662f JSON \u4e5f\u4e0d\u662f\u53ef\u89e3\u6790\u7684 YAML\uff1a{e}")\n            sys.exit(1)\n    # \u5927\u591a\u6570 CityLearn schema \u9876\u5c42\u6709\u4e2a \'root\'\n    return data.get(\'root\', data)\n\ndef main():\n    ap = argparse.ArgumentParser()\n    ap.add_argument(\'--schema\', required=True, help=\'path/to/schema.json\')\n    args = ap.parse_args()\n\n    sc = load_schema(args.schema)\n\n    print("\\n=== Top-level keys ===")\n    print(list(sc.keys()))\n\n    # 1) central_agent & sim period\n    print("\\n=== Simulation/Agent ===")\n    print("central_agent:", sc.get(\'central_agent\'))\n    print("simulation_start_time_step:", sc.get(\'simulation_start_time_step\'))\n    print("simulation_end_time_step:", sc.get(\'simulation_end_time_step\'))\n    print("seconds_per_time_step:", sc.get(\'seconds_per_time_step\'))\n\n    # 2) observations\uff08\u5168\u5c40\uff09\n    obs = sc.get(\'observations\', {})\n    print("\\n=== Global Observations ===")\n    if not obs:\n        print("\u26a0\ufe0f  observations \u662f\u7a7a\u7684\uff08\u8fd9\u4f1a\u5bfc\u81f4 SAC \u89c2\u6d4b\u4e3a None\uff09")\n    else:\n        actives = [k for k,v in obs.items() if isinstance(v, dict) and v.get(\'active\', False)]\n        inactives = [k for k,v in obs.items() if isinstance(v, dict) and not v.get(\'active\', False)]\n        print("active \u6570\u91cf:", len(actives))\n        print("active \u5217\u8868(\u524d20):", actives[:20])\n        if inactives:\n            print("inactive \u5217\u8868(\u524d20):", inactives[:20])\n\n    # 3) buildings\uff08\u5b57\u5178\u6216\u5217\u8868\uff09\n    b = sc.get(\'buildings\', {})\n    print("\\n=== Buildings ===")\n    if isinstance(b, dict):\n        b_names = list(b.keys())\n        print("\u5efa\u7b51\u6570\u91cf:", len(b_names))\n        sample = b_names[:5]\n        print("\u793a\u4f8b\u5efa\u7b51:", sample)\n        # \u68c0\u67e5 include / inactive_observations\n        problem_buildings: List[str] = []\n        fully_inactive: List[str] = []\n        for name in b_names:\n            cfg = b[name] or {}\n            include = cfg.get(\'include\', True)\n            if not include:\n                problem_buildings.append(name)\n            inact = cfg.get(\'inactive_observations\', [])\n            # \u5982\u679c\u628a\u5168\u5c40 active \u90fd\u5c4f\u853d\u4e86\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u8be5\u5efa\u7b51 obs=None\n            try:\n                actives = [k for k,v in obs.items() if isinstance(v, dict) and v.get(\'active\', False)]\n                if actives and isinstance(inact, list) and set(inact) >= set(actives):\n                    fully_inactive.append(name)\n            except Exception:\n                pass\n        if problem_buildings:\n            print(f"\u26a0\ufe0f  \u6709 {len(problem_buildings)} \u680b\u5efa\u7b51 include=false\uff08\u53ef\u80fd\u5bfc\u81f4 None\uff09\uff1a", problem_buildings[:5])\n        if fully_inactive:\n            print(f"\u26a0\ufe0f  \u6709 {len(fully_inactive)} \u680b\u5efa\u7b51\u628a\u6240\u6709\u5168\u5c40\u89c2\u6d4b\u90fd\u5c4f\u853d\u4e86\uff1a", fully_inactive[:5])\n    else:\n        print("\u26a0\ufe0f  buildings \u4e0d\u662f\u5b57\u5178\uff08\u8bf7\u8d34\u5185\u5bb9\u6211\u518d\u770b\uff09")\n\n    # 4) \u5feb\u901f\u201c\u73af\u5883\u63a2\u9488\u201d\uff08\u4e0d\u8bad\u7ec3\uff0c\u53ea reset \u770b\u770b obs \u5f62\u6001\uff09\n    try:\n        from citylearn.citylearn import CityLearnEnv\n        ca = sc.get(\'central_agent\', False)\n        print("\\n=== Env probe (reset) ===")\n        env = CityLearnEnv(args.schema, central_agent=ca)\n        obs0 = env.reset()\n        print("reset() \u8fd4\u56de\u7c7b\u578b:", type(obs0))\n        if obs0 is None:\n            print("\u274c reset() \u8fd4\u56de None \u2014\u2014 SAC \u4f1a\u5728 FloatTensor(None) \u5904\u62a5\u9519\u3002")\n        else:\n            try:\n                # centralized \u2192 \u5411\u91cf/\u6570\u7ec4\uff1bdecentralized \u2192 list[\u6570\u7ec4]\n                if isinstance(obs0, list):\n                    shapes = [getattr(x, \'shape\', None) for x in obs0]\n                    print("\u5206\u5e03\u5f0f\u89c2\u6d4b\u6570\u91cf:", len(obs0), "\u793a\u4f8b\u5f62\u72b6:", shapes[:5])\n                else:\n                    print("\u96c6\u4e2d\u5f0f\u89c2\u6d4b\u5f62\u72b6:", getattr(obs0, \'shape\', None))\n            except Exception:\n                pass\n        env.close()\n    except Exception as e:\n        print("\uff08\u53ef\u9009\u63a2\u9488\u5931\u8d25\uff1a\uff09", e)\n\nif __name__ == \'__main__\':\n    main()\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{src:"http://8.130.141.48/wp-content/uploads/2025/11/17622520053493-scaled.jpg",alt:""}),"\n\u6211\u7684\u8fd0\u884c\u7ed3\u679c"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u8fdb\u884c\u8c03\u8bd5\n\u4ece\u62a5\u9519\u4e2d\u53ef\u4ee5\u77e5\u9053\uff0c\u95ee\u9898\u4e3b\u8981\u662f\u51fa\u73b0\u5728 sac.py \u7684 self.get_post_exploration_prediction \u91cc\uff0c\u518d\u5efa\u4e00\u4e2a py \u6587\u4ef6\u91cd\u5199\u8be5\u7c7b\uff0c\u67e5\u770b\u5230\u5e95\u662f\u54ea\u4e00\u6b65\u51fa\u73b0\u4e86\u95ee\u9898"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'import numpy as np\nimport torch\nfrom citylearn.agents.sac import SAC\n\nclass DebugSAC(SAC):\n    """\u8c03\u8bd5\u7528 SAC\uff1a\u4e0d\u6539\u539f\u5e93\uff0c\u4f46\u6253\u5370 observation & None \u6765\u6e90"""\n\n    def get_post_exploration_prediction(self, observations, deterministic=False):\n\n        # \u2705 \u5982\u679c\u662f dict\uff0c\u5148\u8f6c\u6362\u4e3a list\uff0c\u907f\u514d\u539f\u59cb\u9519\u8bef\n        if isinstance(observations, dict):\n            observations = [obs for obs in observations.values()]\n\n        actions = []\n\n        for i, o in enumerate(observations):\n            # \u2705 Debug\uff1a\u6253\u5370\u539f\u59cb obs\n            print(f"\\n\ud83d\udd0d [Debug] Building {i} raw obs = {o}")\n\n            if o is None:\n                raise ValueError(f"\u274c Observation from agent {i} is None (raw environment output)")\n\n            # \u2705 \u7f16\u7801\n            encoded = self.get_encoded_observations(i, o)\n            print(f"   \u27a4 Encoded obs = {encoded}")\n\n            if encoded is None:\n                raise ValueError(f"\u274c get_encoded_observations() returned None for agent {i}")\n\n            # \u2705 \u5f52\u4e00\u5316\n            normalized = self.get_normalized_observations(i, encoded)\n            print(f"   \u27a4 Normalized obs = {normalized}")\n\n            if normalized is None:\n                raise ValueError(f"\u274c get_normalized_observations() returned None for agent {i}")\n\n            # \u2705 \u5c1d\u8bd5\u8f6c\u6210 tensor\n            try:\n                o_tensor = torch.FloatTensor(normalized).unsqueeze(0).to(self.device)\n            except Exception as e:\n                print(f"\u274c Failed to convert obs to tensor. Obs = {normalized}")\n                raise e\n\n            # \u2705 \u539f\u6765\u7684 action \u83b7\u53d6\u6d41\u7a0b\n            result = self.policy_net[i].sample(o_tensor)\n            a = result[2] if deterministic else result[0]\n            actions.append(a.detach().cpu().numpy()[0])\n\n        return actions\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u628a\u6b65\u9aa4\u5206\u5f00\uff0c\u7ec8\u4e8e\uff01\u627e\u5230\u4e86\u95ee\u9898\u6240\u5728--normalized\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u6709\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\n",(0,i.jsx)(n.strong,{children:"reason\uff1a"}),"\nCityLearn SAC \u4e2d\u5f52\u4e00\u5316\u673a\u5236\u6ca1\u6709\u88ab\u521d\u59cb\u5316 / \u672a\u542f\u7528\u6216\u9047\u5230\u4e86\u65e0\u6548\u503c\uff0c\u6240\u4ee5 get_normalized_observations() \u8fd4\u56de\u4e86 None \u2192 \u4f20\u7ed9 torch.FloatTensor() \u2192 \u62a5\u9519\n\u8fd9\u662f CityLearn SAC \u6846\u67b6\u7684\u4e00\u4e2a\u201c\u8bbe\u8ba1\u7f3a\u9677\u201d\uff08\u9ed8\u8ba4\u4e0d\u5f00\u542f normalization\uff0c\u53c8\u6ca1\u6709 fallback \u673a\u5236\uff09\ncitylearn \u7684\u9ed8\u8ba4\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"normalization_enable \u9ed8\u8ba4\u662f True"}),"\n",(0,i.jsx)(n.li,{children:"\u4f46 normalization \u53c2\u6570\uff08mean/std\uff09\u53ea\u4f1a\u5728\u8bad\u7ec3\u82e5\u5e72\u6b65\u540e\u624d\u66f4\u65b0"}),"\n",(0,i.jsx)(n.li,{children:"\u7b2c 1 \u4e2a timestep \u76f4\u63a5\u8c03\u7528 predict() \u2192 normalization \u77e9\u9635\u8fd8\u6ca1\u6709 \u2192 \u8fd4\u56de None"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"soluation"}),"\n\u5f52\u4e00\u5316\u5728 SAC \u4e2d\u8fd8\u662f\u9700\u8981\u7684\uff0c\u4e0d\u7136\u4f1a\u96be\u4ee5\u6536\u655b\u6216\u4e0d\u7a33\u5b9a\uff0c\u800c\u4e14\u4e0d\u80fd\u4fee\u6539 schema \u91cc\u7684\u6570\u636e\uff08json \u91cc\u4fdd\u5b58\u7684\u90fd\u662f\u771f\u5b9e\u539f\u59cb\u6570\u636e\uff09\n\u4e24\u79cd\u65b9\u6cd5"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5728\u8bad\u7ec3\u524d\u81ea\u52a8\u6536\u96c6\u6570\u636e\uff0c\u521d\u59cb\u5316 mean/std"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'# \u521d\u59cb\u5316 normalization\nobs_buffer = []\n\nobs = env.reset()\nfor _ in range(500):  # \u6536\u96c6\u524d 500 \u6b65\n    action = env.action_space.sample()   # \u968f\u673a\u52a8\u4f5c\n    obs, _, _, _ = env.step(action)\n    obs_list = list(obs.values()) if isinstance(obs, dict) else obs\n    obs_buffer.extend(obs_list)\n\nobs_buffer = np.array(obs_buffer)\nagent.obs_mean = np.mean(obs_buffer, axis=0)\nagent.obs_std = np.std(obs_buffer, axis=0) + 1e-6  # \u907f\u514d\u96640\n\nprint("\u2705 Normalization initialized.")\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u4e2d\u9014\u52a8\u6001\u5f52\u4e00\u5316\n\u5728 SAC \u5185\u90e8\u6bcf\u6536\u96c6\u4e00\u6279\u6570\u636e\u5c31\u66f4\u65b0 mean/std\uff08\u7c7b\u4f3c running mean\uff09,\u53ea\u9700\u8bad\u7ec3\u524d\u624b\u52a8\u8fd0\u884c\u51e0\u6b65 env.step() + agent.observe() \u5373\u53ef\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"summary-1",children:"summary"}),"\n",(0,i.jsx)(n.p,{children:"4.1 \u662f\u7b97\u6cd5\u5728\u4e0d\u540c KPI \u4e0b\u7684\u201c\u76ee\u6807\u51fd\u6570\u5bf9\u6bd4\u5b9e\u9a8c\u201d\uff1b\n4.2 \u662f\u540c\u4e00\u7b97\u6cd5\u5728\u4e0d\u540c\u4f4f\u5b85\u573a\u666f\u4e0b\u7684\u201c\u5b9e\u9645\u50a8\u80fd\u63a7\u5236\u5b9e\u9a8c\u201d\u3002\n\u9488\u5bf9 TypeError: new():\uff1a\n\u5728 CityLearn + SAC \u4e2d\uff0c\u5f52\u4e00\u5316\u4e4b\u6240\u4ee5\u4f1a\u51fa\u73b0 None \u5e76\u62a5\u9519\uff0c\u662f\u56e0\u4e3a\u5f3a\u5316\u5b66\u4e60\u91cc\u7684\u667a\u80fd\u4f53\uff08agent\uff09\u662f\u901a\u8fc7\u4e0e\u73af\u5883\u9010\u6b65\u4ea4\u4e92\u6765\u201c\u5b66\u4e60\u89c2\u5bdf\u6570\u636e\u7684\u5206\u5e03\u201d\uff0c\u800c\u4e0d\u662f\u50cf\u4f20\u7edf\u673a\u5668\u5b66\u4e60\u90a3\u6837\u5728\u4e00\u5f00\u59cb\u5c31\u52a0\u8f7d\u6240\u6709\u6570\u636e\u5e76\u8ba1\u7b97\u6574\u4f53\u5747\u503c\u548c\u6807\u51c6\u5dee\u3002\u5f52\u4e00\u5316\u9700\u8981\u7528\u5230\u89c2\u6d4b\u6570\u636e\u7684\u5747\u503c\u548c\u6807\u51c6\u5dee\uff08mean/std\uff09\uff0c\u4f46\u5728\u8bad\u7ec3\u521d\u671f\uff0cagent \u8fd8\u6ca1\u6709\u6536\u96c6\u5230\u8db3\u591f\u7684\u89c2\u6d4b\u6570\u636e\uff0c\u8fd9\u4e9b\u5f52\u4e00\u5316\u53c2\u6570\u5c1a\u672a\u5efa\u7acb\uff0c\u56e0\u6b64 get_normalized_observations() \u8fd4\u56de\u4e86 None\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u9519\u8bef\u5e76\u4e0d\u662f\u7531\u539f\u59cb\u6570\u636e\u6216\u73af\u5883\u9020\u6210\u7684\uff0c\u800c\u662f\u56e0\u4e3a\u201cagent \u8fd8\u4e0d\u4e86\u89e3\u73af\u5883\u7684\u6570\u636e\u5206\u5e03\uff0c\u5374\u63d0\u524d\u5c1d\u8bd5\u5bf9\u6574\u4e2a\u73af\u5883\u8fdb\u884c\u5f52\u4e00\u5316\u201d\u3002\u89e3\u51b3\u65b9\u6cd5\u53ef\u4ee5\u662f\u8df3\u8fc7\u5f52\u4e00\u5316\u3001\u5728\u8bad\u7ec3\u524d\u8fdb\u884c warm-up \u6536\u96c6\u6570\u636e\u4ee5\u521d\u59cb\u5316\u5747\u503c\u548c\u6807\u51c6\u5dee\uff0c\u6216\u4f7f\u7528 centralized agent \u7b49\u65b9\u5f0f\u3002"}),"\n",(0,i.jsx)(n.h1,{id:"vehicle-to-grid-control",children:"Vehicle-to-Grid Control"}),"\n",(0,i.jsx)(n.h2,{id:"1-\u91cd\u70b9\u4e0e\u76ee\u6807",children:"1. \u91cd\u70b9\u4e0e\u76ee\u6807"}),"\n",(0,i.jsx)(n.p,{children:"\u5728 CityLearn \u73af\u5883\u4e2d\u6269\u5c55\u5f3a\u5316\u5b66\u4e60\u6a21\u578b\uff0c\u4f7f\u5f97\u7535\u52a8\u6c7d\u8f66\u4e0d\u4ec5\u80fd\u5145\u7535\uff0c\u8fd8\u80fd\u5728\u9ad8\u5cf0\u65f6\u6bb5\u5c06\u7535\u80fd\u56de\u9988\u7ed9\u5efa\u7b51\u6216\u7535\u7f51\uff0c\u4ee5\u5b9e\u73b0\u524a\u5cf0\u586b\u8c37\u548c\u6574\u4f53\u80fd\u8017\u4f18\u5316\uff0c\u76ee\u6807\u5982\u4e0b"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u5c06 V2G \u673a\u5236\u5f15\u5165\u667a\u80fd\u7535\u7f51\u4e2d\u7684\u591a\u5efa\u7b51\u63a7\u5236\u6846\u67b6\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u63a2\u7a76 RL \u667a\u80fd\u4f53\u5982\u4f55\u5728\u5efa\u7b51\u50a8\u80fd\u7cfb\u7edf\u4e0e\u7535\u52a8\u6c7d\u8f66\u7535\u6c60\u4e4b\u95f4\u534f\u8c03\u80fd\u91cf\u6d41\u52a8\uff1b"}),"\n",(0,i.jsx)(n.li,{children:"\u76ee\u6807\u51fd\u6570\u4e0d\u4ec5\u8003\u8651\u7535\u8d39\u6700\u5c0f\u5316\uff0c\u8fd8\u8003\u8651\u6392\u653e\u3001\u5cf0\u503c\u8d1f\u8377\u548c\u8212\u9002\u5ea6\u7ea6\u675f\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"2-\u73af\u5883\u8bbe\u7f6e",children:"2. \u73af\u5883\u8bbe\u7f6e"}),"\n",(0,i.jsx)(n.p,{children:"\u5728 CityLearn \u73af\u5883\u4e2d\uff0c\u6bcf\u680b\u5efa\u7b51\u4e0d\u4ec5\u6709 battery \u50a8\u80fd\u7cfb\u7edf\uff0c\u8fd8\u989d\u5916\u914d\u7f6e EV battery\uff0cRL \u667a\u80fd\u4f53\u7684\u52a8\u4f5c\u7a7a\u95f4\u5305\u62ec\uff1a"}),"\n",(0,i.jsx)(n.span,{className:"katex-display",children:(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mo,{fence:"true",children:"["}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsx)(n.mtext,{children:"building\xa0battery"})]}),(0,i.jsx)(n.mo,{separator:"true",children:","}),(0,i.jsx)(n.mtext,{children:"\xa0"}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsx)(n.mtext,{children:"EV\xa0battery"})]}),(0,i.jsx)(n.mo,{fence:"true",children:"]"})]})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"a_t = \\left[ a_{\\text{building battery}},\\ a_{\\text{EV battery}} \\right]\n"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,i.jsxs)(n.span,{className:"minner",children:[(0,i.jsx)(n.span,{className:"mopen delimcenter",style:{top:"0em"},children:"["}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:(0,i.jsx)(n.span,{className:"mord text mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"building\xa0battery"})})})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mpunct",children:","}),(0,i.jsx)(n.span,{className:"mspace",children:"\xa0"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:(0,i.jsx)(n.span,{className:"mord text mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"EV\xa0battery"})})})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mclose delimcenter",style:{top:"0em"},children:"]"})]})]})]})]})}),"\n",(0,i.jsxs)(n.p,{children:["\u5176\u4e2d\u6bcf\u4e2a",(0,i.jsx)(n.code,{children:"a_t"}),"\u90fd\u8868\u793a\u5145/\u653e\u7535\u6bd4\u4f8b\uff1b"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["EV \u7684",(0,i.jsx)(n.strong,{children:"\u53ef\u7528\u65f6\u95f4\u7a97\u53e3"}),"\u7531\u4f4f\u5b85\u7528\u6237\u884c\u4e3a\u6570\u636e\u786e\u5b9a\uff08\u8f66\u8f86\u901a\u5e38\u767d\u5929\u79bb\u5bb6\u3001\u591c\u665a\u63a5\u5165\u7535\u7f51\uff09\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:["\u5145\u7535\u529f\u7387\u53d7\u9650\u4e8e",(0,i.jsx)(n.code,{children:"P_{\\max}"}),"\uff0c\u540c\u65f6\u9075\u5b88 SoC \u4e0a\u4e0b\u754c\u7ea6\u675f\uff1b"]}),"\n",(0,i.jsx)(n.li,{children:"\u52a8\u4f5c\u7ecf\u8fc7\u5f52\u4e00\u5316\u4e0e\u88c1\u526a\uff0c\u4fdd\u8bc1\u7269\u7406\u53ef\u884c\u6027\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"3-\u5956\u52b1\u51fd\u6570",children:"3. \u5956\u52b1\u51fd\u6570"}),"\n",(0,i.jsx)(n.p,{children:"\u5178\u578b\u5f62\u5f0f\u4e3a\uff1a"}),"\n",(0,i.jsx)(n.span,{className:"katex-display",children:(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"r"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsx)(n.mo,{children:"\u2212"}),(0,i.jsx)(n.mi,{children:"\u03b1"}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"C"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"\u2212"}),(0,i.jsx)(n.mi,{children:"\u03b2"}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"E"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"\u2212"}),(0,i.jsx)(n.mi,{children:"\u03b3"}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"P"}),(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mtext,{children:"peak"}),(0,i.jsx)(n.mo,{separator:"true",children:","}),(0,i.jsx)(n.mi,{children:"t"})]})]})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"r_t = -\\alpha C_t - \\beta E_t - \\gamma P_{\\text{peak},t}\n"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"r"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,i.jsx)(n.span,{className:"mord",children:"\u2212"}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:"\u03b1"}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.05278em"},children:"\u03b2"}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"E"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"-0.0576em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,i.jsx)(n.span,{className:"mbin",children:"\u2212"}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.05556em"},children:"\u03b3"}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord text mtight",children:(0,i.jsx)(n.span,{className:"mord mtight",children:"peak"})}),(0,i.jsx)(n.span,{className:"mpunct mtight",children:","}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(n.span,{})})})]})})]})]})]})]})}),"\n",(0,i.jsx)(n.p,{children:"where"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"C_t"}),"\uff1a\u7528\u7535\u6210\u672c\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"E_t"}),"\uff1a\u78b3\u6392\u653e\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"P_{\\text{peak},t}"}),"\uff1a\u5cf0\u503c\u529f\u7387\uff1b"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"\\alpha, \\beta, \\gamma"}),"\uff1a\u6743\u91cd\u7cfb\u6570\u3002\n\u901a\u8fc7 V2G\uff0c\u667a\u80fd\u4f53\u5b66\u4f1a\u5728\u9ad8\u4ef7\u65f6\u6bb5\u653e\u7535\u3001\u4f4e\u4ef7\u65f6\u6bb5\u5145\u7535\uff0c\u4ece\u800c\u964d\u4f4e\u7efc\u5408\u6210\u672c\u3002"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"4-\u533a\u522b",children:"4. \u533a\u522b"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u5bf9\u6bd4\u9879"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"4.1 Baseline Control (RBC/Baseline)"})}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"4.2 Reinforcement Learning Control (SAC)"})}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"4.3 Vehicle-to-Grid Control (V2G)"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u63a7\u5236\u5bf9\u8c61"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u4ec5\u5efa\u7b51\u7535\u6c60 (Building Battery)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5efa\u7b51\u7535\u6c60 + \u7535\u52a8\u8f66\u7535\u6c60 (Building + EV Battery)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"schema \u6587\u4ef6"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"schema.json"}),"\uff08\u57fa\u7840\u5efa\u7b51\uff09"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"schema.json"}),"\uff08\u76f8\u540c\uff09"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"v2g_schema.json"})," \u6216 ",(0,i.jsx)(n.code,{children:"include_ev=True"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u52a8\u4f5c\u7a7a\u95f4"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsx)(n.mo,{stretchy:"false",children:"["}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"b"}),(0,i.jsx)(n.mi,{children:"u"}),(0,i.jsx)(n.mi,{children:"i"}),(0,i.jsx)(n.mi,{children:"l"}),(0,i.jsx)(n.mi,{children:"d"}),(0,i.jsx)(n.mi,{children:"i"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mi,{children:"g"})]})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"]"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"a_t = [a_{building}]"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,i.jsx)(n.span,{className:"mopen",children:"["}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"b"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"u"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"d"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"in"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"g"})]})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mclose",children:"]"})]})]})]})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsxs)(n.span,{className:"katex",children:[(0,i.jsx)(n.span,{className:"katex-mathml",children:(0,i.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,i.jsxs)(n.semantics,{children:[(0,i.jsxs)(n.mrow,{children:[(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsx)(n.mi,{children:"t"})]}),(0,i.jsx)(n.mo,{children:"="}),(0,i.jsx)(n.mo,{stretchy:"false",children:"["}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"b"}),(0,i.jsx)(n.mi,{children:"u"}),(0,i.jsx)(n.mi,{children:"i"}),(0,i.jsx)(n.mi,{children:"l"}),(0,i.jsx)(n.mi,{children:"d"}),(0,i.jsx)(n.mi,{children:"i"}),(0,i.jsx)(n.mi,{children:"n"}),(0,i.jsx)(n.mi,{children:"g"})]})]}),(0,i.jsx)(n.mo,{separator:"true",children:","}),(0,i.jsxs)(n.msub,{children:[(0,i.jsx)(n.mi,{children:"a"}),(0,i.jsxs)(n.mrow,{children:[(0,i.jsx)(n.mi,{children:"E"}),(0,i.jsx)(n.mi,{children:"V"})]})]}),(0,i.jsx)(n.mo,{stretchy:"false",children:"]"})]}),(0,i.jsx)(n.annotation,{encoding:"application/x-tex",children:"a_t = [a_{building}, a_{EV}]"})]})})}),(0,i.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2806em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"t"})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,i.jsx)(n.span,{className:"mrel",children:"="}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,i.jsxs)(n.span,{className:"base",children:[(0,i.jsx)(n.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),(0,i.jsx)(n.span,{className:"mopen",children:"["}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3361em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"b"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"u"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"i"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"d"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",children:"in"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"g"})]})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.2861em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mpunct",children:","}),(0,i.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,i.jsxs)(n.span,{className:"mord",children:[(0,i.jsx)(n.span,{className:"mord mathnormal",children:"a"}),(0,i.jsx)(n.span,{className:"msupsub",children:(0,i.jsxs)(n.span,{className:"vlist-t vlist-t2",children:[(0,i.jsxs)(n.span,{className:"vlist-r",children:[(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.3283em"},children:(0,i.jsxs)(n.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,i.jsx)(n.span,{className:"pstrut",style:{height:"2.7em"}}),(0,i.jsx)(n.span,{className:"sizing reset-size6 size3 mtight",children:(0,i.jsxs)(n.span,{className:"mord mtight",children:[(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05764em"},children:"E"}),(0,i.jsx)(n.span,{className:"mord mathnormal mtight",style:{marginRight:"0.22222em"},children:"V"})]})})]})}),(0,i.jsx)(n.span,{className:"vlist-s",children:"\u200b"})]}),(0,i.jsx)(n.span,{className:"vlist-r",children:(0,i.jsx)(n.span,{className:"vlist",style:{height:"0.15em"},children:(0,i.jsx)(n.span,{})})})]})})]}),(0,i.jsx)(n.span,{className:"mclose",children:"]"})]})]})]})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u72b6\u6001\u7a7a\u95f4"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5efa\u7b51\u7535\u8d1f\u8377\u3001\u592a\u9633\u80fd\u3001SoC\u3001\u7535\u4ef7\u7b49"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u989d\u5916\u5305\u542b EV SoC\u3001EV \u53ef\u7528\u65f6\u95f4\u7a97\u53e3"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u5f3a\u5316\u5b66\u4e60\u667a\u80fd\u4f53"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u65e0\uff08\u89c4\u5219\u63a7\u5236\uff09"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"SAC / PPO"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"SAC\uff08\u652f\u6301 EV \u5145\u653e\u7535\u8c03\u5ea6\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u76ee\u6807\u51fd\u6570"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6700\u5c0f\u5316\u7535\u8d39"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6700\u5c0f\u5316\u7535\u8d39 + \u6392\u653e + \u5cf0\u503c\u529f\u7387\uff08\u591a\u76ee\u6807\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u65b0\u53c2\u6570"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u2014"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u2014"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:[(0,i.jsx)(n.code,{children:"v2g=True"})," \u6216 ",(0,i.jsx)(n.code,{children:"include_ev=True"})]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u4eff\u771f\u7279\u70b9"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5355\u80fd\u7cfb\u7edf"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5355\u80fd\u7cfb\u7edf + RL \u63a7\u5236"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u80fd\u7cfb\u7edf\uff08\u5efa\u7b51 + \u8f66\u8f86 + \u7535\u7f51\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u521b\u65b0\u70b9"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u4f20\u7edf\u63a7\u5236\u57fa\u7ebf"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"RL \u9002\u5e94\u6027\u5b66\u4e60"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"RL \u6269\u5c55\u5230\u53cc\u50a8\u80fd\u534f\u540c\u4f18\u5316"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u4e00\u53e5\u8bdd\u6982\u62ec\u5c31\u662f\uff0c4.3 \u5728 RL \u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u6269\u5c55\u5230\u201c\u5efa\u7b51 + \u7535\u52a8\u8f66\u201d\u53cc\u50a8\u80fd\u63a7\u5236\uff0c\u5373 Vehicle-to-Grid (V2G)"}),"\n",(0,i.jsx)(n.h2,{id:"5-\u4ee3\u7801",children:"5. \u4ee3\u7801"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5 4.1 \u7684 SAC \u90e8\u5206\u4e3a baseline\uff0c\u5982\u4e0b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'from citylearn.citylearn import CityLearnEnv\nfrom citylearn.agents.sac import SAC\nfrom pathlib import Path\n\ndef run_v2g(agent_class, schema, episodes=3, central_agent=False, save_dir=None, **kwargs):\n    print(f"\\n=== Running {agent_class.__name__} (Vehicle-to-Grid) ===")\n    # \u2705 \u542f\u7528 include_evs / v2g \u53c2\u6570\n    env = CityLearnEnv(schema, central_agent=central_agent, include_evs=True, **kwargs)\n\n    agent = agent_class(env)\n    agent.learn(episodes=episodes, deterministic_finish=True)\n    results = env.evaluate()\n    env.close()\n\n    print(f"\u2705 {agent_class.__name__} (V2G) finished.")\n    if save_dir:\n        Path(save_dir).mkdir(parents=True, exist_ok=True)\n        (Path(save_dir)/"metrics.txt").write_text(str(results))\n    return results\n\ndef main():\n    # \u2705 \u4f7f\u7528\u542b EV battery \u7684 V2G \u7248\u672c schema\n    schema_v2g = "data/citylearn_challenge_2022/v2g_schema.json"\n\n    # \u2705 \u8fd0\u884c SAC \u63a7\u5236\u5668\uff08Vehicle-to-Grid \u5b9e\u9a8c\uff09\n    res_v2g = run_v2g(SAC, schema_v2g, episodes=5, central_agent=False, save_dir="results/4_3_v2g_sac")\n\n    print("\\n=== V2G SAC Results ===")\n    print(res_v2g)\n\nif __name__ == "__main__":\n    main()\n'})}),"\n",(0,i.jsx)(n.h1,{id:"occupant-comfort-feedback-during-automated-demand-response",children:"Occupant comfort feedback during automated demand response"}),"\n",(0,i.jsx)(n.p,{children:"\u8c8c\u4f3c\u590d\u73b0\u4e0d\u51fa\u6765\uff0c\u56e0\u4e3a\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e CityLearn \u7684 EULP \u6570\u636e + Ecobee DYD \u7684\u771f\u5b9e\u7528\u6237\u7edf\u8ba1\u6a21\u578b\uff0c\n\u6784\u5efa\u51fa\u7684\u534a\u5b9e\u6570\u636e\u4eff\u771f\u6848\u4f8b\uff08semi-synthetic simulation\uff09\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"1-\u76ee\u7684",children:"1. \u76ee\u7684"}),"\n",(0,i.jsx)(n.p,{children:"\u7814\u7a76\u5728\u81ea\u52a8\u5316\u9700\u91cf\u54cd\u5e94\uff08Automated Demand Response, ADR\uff09\u671f\u95f4\u5f15\u5165\u4f4f\u6237\u8212\u9002\u5ea6\u53cd\u9988\u673a\u5236\u5bf9\u6574\u4f53\u7535\u529b\u8d1f\u8f7d\u4e0e\u63a7\u5236\u6027\u80fd\u7684\u5f71\u54cd\u3002\n\u901a\u8fc7\u5f15\u5165\u4f4f\u6237\u8986\u76d6\uff08override\uff09\u6a21\u578b\uff0c\u6a21\u62df\u5f53\u7528\u6237\u611f\u5230\u4e0d\u8212\u9002\u65f6\u56de\u9000\u6052\u6e29\u5668\u8bbe\u5b9a\u6e29\u5ea6\u7684\u884c\u4e3a\uff0c\u540c\u65f6\u5bf9\u6bd4\u4e0d\u540c\u5c42\u6b21\u7684\u4f4f\u6237\u5efa\u6a21\u590d\u6742\u5ea6\uff08Level of Detail, LoD 1\u20133\uff09\u5bf9\u80fd\u6e90\u6210\u672c\u3001\u5cf0\u503c\u8d1f\u8f7d\u524a\u51cf\u4ee5\u53ca\u4f4f\u6237\u4e0d\u9002\u6b21\u6570\u7684\u5f71\u54cd"}),"\n",(0,i.jsx)(n.h2,{id:"\u73af\u5883\u914d\u7f6e",children:"\u73af\u5883\u914d\u7f6e"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6a21\u5757"}),(0,i.jsx)(n.th,{children:"\u914d\u7f6e / \u8bf4\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"CityLearn \u7248\u672c"})}),(0,i.jsx)(n.td,{children:"2.4.2\uff08\u6216 \u2265 2.4\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Python \u7248\u672c"})}),(0,i.jsx)(n.td,{children:"3.10+"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5f3a\u5316\u5b66\u4e60\u7b97\u6cd5"})}),(0,i.jsx)(n.td,{children:"Soft Actor\u2013Critic (SAC)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u786c\u4ef6\u73af\u5883"})}),(0,i.jsx)(n.td,{children:"Ubuntu/macOS, CPU / GPU \u53ef\u9009"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u57fa\u7840\u6570\u636e\u96c6"})}),(0,i.jsx)(n.td,{children:"EULP\uff08Electric Utility Load Profiles, Montr\xe9al \u51ac\u5b63\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u4f4f\u6237\u884c\u4e3a\u6a21\u578b"})}),(0,i.jsx)(n.td,{children:"Ecobee Donate Your Data\uff08DYD\uff09\u6570\u636e\u8bad\u7ec3\u51fa\u7684\u8986\u76d6\u6982\u7387\u6a21\u578b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u4eff\u771f\u5468\u671f"})}),(0,i.jsx)(n.td,{children:"\u51ac\u5b63\u4e09\u4e2a\u6708\uff0812 \u6708\u20132 \u6708\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5efa\u7b51\u6570\u91cf"})}),(0,i.jsx)(n.td,{children:"10 \u680b\u72ec\u7acb\u4f4f\u5b85"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u4eff\u771f\u7c92\u5ea6"})}),(0,i.jsx)(n.td,{children:"1 \u5c0f\u65f6\u6b65\u957f\uff0824\xd790 steps\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"DR \u4e8b\u4ef6"})}),(0,i.jsx)(n.td,{children:"\u5de5\u4f5c\u65e5 18:00\u201321:00 \u8bbe\u5b9a\u70b9\u4e0b\u8c03 1.1\xb0C (\u22482\xb0F)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u5bf9\u7167\u7ec4"})}),(0,i.jsx)(n.td,{children:"LoD1: \u57fa\u7ebf\uff0c\u65e0\u63a7\u5236\uff1bLoD2: \xb12\xb0C \u8212\u9002\u5e26\uff0cRL \u63a7\u5236\uff1bLoD3: \xb12\xb0C+\u8986\u76d6\u6a21\u578b+DR \u4e8b\u4ef6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"\u8f93\u51fa\u6307\u6807"})}),(0,i.jsx)(n.td,{children:"\u7535\u8d39\u6210\u672c\u3001\u5cf0\u503c\u529f\u7387\u3001\u603b\u8017\u7535\u91cf\u3001\u8986\u76d6\u6b21\u6570\u4e0e\u8986\u76d6\u5e45\u5ea6"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5bf9\u6bd4",children:"\u5bf9\u6bd4"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"\u9879\u76ee"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"4.1 Basic Control"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"4.2 Community Coordination"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"4.3 Multi-Objective (Economic/Emission)"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"4.4 Comfort Feedback (\u672c\u8282)"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u7814\u7a76\u91cd\u70b9"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5355\u5efa\u7b51\u57fa\u672c\u8d1f\u8f7d\u63a7\u5236"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u5efa\u7b51\u95f4\u80fd\u91cf\u534f\u8c03"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u76ee\u6807\u6743\u8861\uff08\u6210\u672c vs \u6392\u653e\uff09"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u4f4f\u6237\u8212\u9002\u53cd\u9988\u4e0e DR \u54cd\u5e94"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u6570\u636e\u96c6"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u7b80\u5316\u4f4f\u5b85\u8d1f\u8f7d"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u793e\u533a\u7ea7 EULP"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u540c\u4e0a\uff08+ DYD \u884c\u4e3a\u6a21\u578b\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u63a7\u5236\u76ee\u6807"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c\u6700\u5c0f\u5316"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c + \u8d1f\u8f7d\u5e73\u8861"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c + \u6392\u653e"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c + \u8212\u9002\u5ea6\uff08\u51cf\u5c11\u8986\u76d6\u6b21\u6570\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u5916\u90e8\u4fe1\u53f7"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u7535\u4ef7"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u7535\u4ef7"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u7535\u4ef7 + \u6392\u653e\u56e0\u5b50"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u7535\u4ef7 + DR \u4e8b\u4ef6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u4f4f\u6237\u6a21\u578b"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u56fa\u5b9a\u8bbe\u5b9a\u6e29\u5ea6"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u56fa\u5b9a\u8bbe\u5b9a\u6e29\u5ea6"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u56fa\u5b9a\u8bbe\u5b9a\u6e29\u5ea6"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u52a8\u6001\u8bbe\u5b9a\u6e29\u5ea6 + \u8986\u76d6\u884c\u4e3a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"LoD (\u590d\u6742\u5ea6)"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"LoD1"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"LoD1\u20132"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"LoD1\u20132"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"LoD1\u20133"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u5f3a\u5316\u5b66\u4e60\u7ed3\u6784"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u5355\u667a\u80fd\u4f53 SAC"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u667a\u80fd\u4f53 SAC"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u76ee\u6807 SAC (Reward = \u03b1Cost + \u03b2Emission)"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u591a\u76ee\u6807 SAC (Reward = \u03b1Cost + \u03b2Comfort)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.strong,{children:"\u8bc4\u4ef7\u6307\u6807"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u80fd\u8017/\u6210\u672c"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u80fd\u8017/\u5cf0\u503c"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c+\u6392\u653e\u6307\u6807"}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"\u6210\u672c+\u5cf0\u503c+\u8986\u76d6\u6b21\u6570"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"\u603b\u7ed3\u6765\u8bf4\uff0c4.4 \u5728 4.3 \u57fa\u7840\u4e0a\u52a0\u5165\u4eba\u7684\u56e0\u7d20\uff08\u4f4f\u6237\u8212\u9002\u53cd\u9988\uff09"})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var t=s(96540);const i={},l=t.createContext(i);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),t.createElement(l.Provider,{value:n},e.children)}},77764:e=>{e.exports=JSON.parse('{"permalink":"/blog/26-CityLearn_experiment","editUrl":"https://github.com/yourrepo/blog/26-CityLearn_experiment.md","source":"@site/blog/26-CityLearn_experiment.md","title":"CityLearn experiment","description":"\u4ee3\u7801\u8def\u5f84\uff1ahttps://github.com/zqqqqqqj1110/CityLearn_exp.git","date":"2025-10-27T00:00:00.000Z","tags":[{"inline":true,"label":"RL","permalink":"/blog/tags/rl"}],"readingTime":24.85,"hasTruncateMarker":false,"authors":[{"name":"zqqqj","title":"super bug engineer 4 nlp,robot,cv,ml and ds","url":"https://github.com/zqqqqqqj1110","imageURL":"https://avatars.githubusercontent.com/u/95482898?v=4","key":"zqqqj","page":null}],"frontMatter":{"title":"CityLearn experiment","authors":["zqqqj"],"tags":["RL"],"date":"2025-10-27T00:00:00.000Z"},"unlisted":false,"prevItem":{"title":"AI\u4e16\u754c\u5927\u5165\u95e8","permalink":"/blog/25-AI classification"},"nextItem":{"title":"AI\u4e16\u754c\u5927\u5165\u95e8","permalink":"/blog/assets/25-AI classification"}}')}}]);